

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>モジュールとアルゴリズム &#8212; 経済学のためのPython入門</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/myadmonitions.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-R9KXY9G892"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-R9KXY9G892');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '1_Basics_V';</script>
    <link rel="canonical" href="https://py4basics.github.io/1_Basics_V.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="図示とシミュレーション" href="1_Basics_VI.html" />
    <link rel="prev" title="制御フロー" href="1_Basics_IV.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">経済学のためのPython入門</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Python入門I</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="1_Basics_I.html">基本データ型と変数</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_II.html">データの操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_III.html">関数とメソッド</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_IV.html">制御フロー</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">モジュールとアルゴリズム</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_VI.html">図示とシミュレーション</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python入門II</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="2_NumPy.html"><code class="docutils literal notranslate"><span class="pre">NumPy</span></code>：高速化</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_Pandas.html"><code class="docutils literal notranslate"><span class="pre">Pandas</span></code>：データ分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_matplotlib.html"><code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>：図示</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_pandas_plot.html"><code class="docutils literal notranslate"><span class="pre">Pandas</span></code>：図示</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_SciPy_optimize.html"><code class="docutils literal notranslate"><span class="pre">SciPy.optimize</span></code>：解の求め方と最適化問題</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_NumPy_random.html"><code class="docutils literal notranslate"><span class="pre">Numpy</span></code>: ランダム変数</a></li>
<li class="toctree-l1"><a class="reference external" href="https://py4etrics.github.io/5_SciPy_stats.html">SciPy.stats：確率分布</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">参考</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="0_Preparations.html">ツールのインストールと説明</a></li>
<li class="toctree-l1"><a class="reference internal" href="things_to_note.html">Tipsと注意点</a></li>
<li class="toctree-l1"><a class="reference internal" href="Grade.html">学業成績の分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Gapminder.html">Gapminder</a></li>
<li class="toctree-l1"><a class="reference internal" href="Moving_Average.html">移動平均</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">経済学</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://py4macro.github.io">Pythonで学ぶマクロ経済学（中級＋レベル）</a></li>
<li class="toctree-l1"><a class="reference external" href="https://py4etrics.github.io">Pythonで学ぶ入門計量経済学</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">JupyterLite</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://py4class.netlify.app">JupyterLiteを始める</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/Py4Basics/py4basics.github.io/source?urlpath=tree/1_Basics_V.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/Py4Basics/py4basics.github.io/blob/source/1_Basics_V.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/1_Basics_V.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>モジュールとアルゴリズム</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">モジュールとパッケージ</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">説明</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#math"><code class="docutils literal notranslate"><span class="pre">math</span></code>モジュール</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random"><code class="docutils literal notranslate"><span class="pre">random</span></code>モジュール</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#see"><code class="docutils literal notranslate"><span class="pre">see</span></code>モジュール</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">アルゴリズム</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">例１：合計</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#for"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#while"><code class="docutils literal notranslate"><span class="pre">while</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">実行スピード比較</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">例２：値の探索</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id9"><code class="docutils literal notranslate"><span class="pre">while</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">番兵法</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">組み込み関数</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">例３：最小値の探索</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">直接的な探索</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">間接的な探索</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">実行スピード比較</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">例４：ソート</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">単純選択ソート</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">バブル・ソート</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">実行スピード比較</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">疑似コード</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fizzbuzz"><code class="docutils literal notranslate"><span class="pre">FizzBuzz</span></code>問題</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">リストの合計（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">リストの合計（<code class="docutils literal notranslate"><span class="pre">while</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">コイントス（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">コイントス（<code class="docutils literal notranslate"><span class="pre">while</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">リストの最大値</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">最後に</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>モジュールとアルゴリズム<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h1>
<div name="html-admonition" style="font-size: 0.8em">
<input type="button" onclick="location.href='https://translate.google.com/translate?hl=&sl=ja&tl=en&u='+window.location;" value="Google translation" style="color:#ffffff;background-color:#008080; height:25px" onmouseover="this.style.background='#99ccff'" onmouseout="this.style.background='#008080'"/> in English or the language of your choice.
</div><br><section id="id2">
<h2>モジュールとパッケージ<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<section id="id3">
<h3>説明<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h3>
<p>Pythonには組み込み関数が多く用意されているが，Jupyter Notebookで<code class="docutils literal notranslate"><span class="pre">Python</span></code>のセッションを開始しても全ての関数が使える状態になっていない。使えるようにするためには，モジュール（modules）やパッケージ（package）と呼ばれるものを読み込む必要がある。２つの違いを簡単にいうと次のようになる。</p>
<ul class="simple">
<li><p>モジュール（module）は<strong>１つ</strong>のファイル（拡張子が<code class="docutils literal notranslate"><span class="pre">.py</span></code>）にまとめられた関数群であり，</p></li>
<li><p>パッケージは（package）<strong>複数</strong>つのファイル（拡張子が<code class="docutils literal notranslate"><span class="pre">.py</span></code>）で構成されている（フォルダーにまとめられている）</p></li>
</ul>
<p>従って，モジュール全体を読み込んだり，あるパッケージの１つのモジュールだけを読み込むということも可能である。授業では，<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>，<code class="docutils literal notranslate"><span class="pre">SciPy</span></code>，<code class="docutils literal notranslate"><span class="pre">Pandas</span></code>を使うが，ここでは例として数学用の<code class="docutils literal notranslate"><span class="pre">math</span></code>モジュール，ランダム変数用の<code class="docutils literal notranslate"><span class="pre">random</span></code>モジュール，オブジェクトの属性を表示する<code class="docutils literal notranslate"><span class="pre">see</span></code>モジュールを取り上げる。</p>
<p>含まれる関数を使うためには<code class="docutils literal notranslate"><span class="pre">import</span></code>を使って読み込む必要がある。モジュールの全てを読み込むとモジュール内の全ての関数が使用可能となる。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>更に付け加えると，サブパッケージ（subpackage）とサブモジュール（submodule）がある大きなパッケージもある。次の章で説明する<a class="reference internal" href="2_NumPy.html#chap-numpy"><span class="std std-ref">Numpy</span></a>パッケージを例として挙げることができる。フォルダーのの構成で考えると次のようになる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>package（フォルダー）
|-- __init__.py（ファイル）
|-- module.py（ファイル; 関数が配置）
|-- subpackage（フォルダー）
        |-- __init__.py（ファイル）
        |-- submodule.py（ファイル; 関数が配置）
</pre></div>
</div>
<p>ここで<code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>はパッケージとサブパッケージのフォルダーに必ず必要なファイルであり，空の場合もあれば関数が含まれる場合もある。</p>
</div>
</section>
<section id="math">
<span id="sec-v-solow"></span><h3><code class="docutils literal notranslate"><span class="pre">math</span></code>モジュール<a class="headerlink" href="#math" title="Permalink to this heading">#</a></h3>
<p>名前が示すように数学に関する関数がまとめられているモジュールとなる（<a class="reference external" href="https://docs.python.org/ja/3/library/math.html">詳細はこのリンクを参照</a>）。<code class="docutils literal notranslate"><span class="pre">math</span></code>を次のコードで読み込むことができる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
</pre></div>
</div>
</div>
</div>
<p>最初の例として平方根を計算してみよう。使う関数名は，square rootの略となる<code class="docutils literal notranslate"><span class="pre">sqrt()</span></code>。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">math.sqrt</span></code>とは「<code class="docutils literal notranslate"><span class="pre">math</span></code>モジュールの<code class="docutils literal notranslate"><span class="pre">sqrt</span></code>」という意味であり，<code class="docutils literal notranslate"><span class="pre">math</span></code>をつけるのは他のモジュールの関数<code class="docutils literal notranslate"><span class="pre">sqrt</span></code>とバッティングしないようにするためである。</p>
<p>モジュール名が長い場合は，短い名前で読み込むことも可能である。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">m</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.0
</pre></div>
</div>
</div>
</div>
<p>モジュール内の特定の関数だけを読み込むことも可能である。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">log</span>   <span class="c1"># logは自然対数で, sqrtの両方を読み込む</span>
</pre></div>
</div>
</div>
</div>
<p>このコードは「<code class="docutils literal notranslate"><span class="pre">math</span></code>モジュールから<code class="docutils literal notranslate"><span class="pre">sqrt</span></code>と<code class="docutils literal notranslate"><span class="pre">log</span></code>を読み込む」と読むことができる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sqrt</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">log</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(3.1622776601683795, 2.302585092994046)
</pre></div>
</div>
</div>
</div>
<p>ただ、この場合は他のモジュールやパッケージ、もしくは自分が定義した関数をバッティングしないように注意する必要がある。</p>
</section>
<section id="random">
<h3><code class="docutils literal notranslate"><span class="pre">random</span></code>モジュール<a class="headerlink" href="#random" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">random</span></code>モジュールを使うことにより乱数を発生させることができる（<a class="reference external" href="https://docs.python.org/ja/3/library/random.html">詳細はこのリンクを参照</a>）。まず<code class="docutils literal notranslate"><span class="pre">random</span></code>をインポートしよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
</pre></div>
</div>
</div>
</div>
<p>様々な関数が用意されているが，その中の<code class="docutils literal notranslate"><span class="pre">randint()</span></code>関数は，引数で指定するランダムな整数を返す。</p>
<ul class="simple">
<li><p>第１引数：最小値（整数型）</p></li>
<li><p>第２引数：最大値（整数型）</p></li>
</ul>
<p>次のコードは<span class="math notranslate nohighlight">\([1,10]\)</span>の間の整数を返す。<code class="docutils literal notranslate"><span class="pre">1</span></code>と<code class="docutils literal notranslate"><span class="pre">10</span></code>は戻り値に含まれることに注意しよう。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>では実際にコードを実行してみよう。次のコードはサイコロの目（1~6）を１つを返す。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<p>内包表記を使って10回サイコロを振った結果を表示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[6, 6, 5, 5, 6, 2, 2, 5, 2, 1]
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>内包表記に<code class="docutils literal notranslate"><span class="pre">_</span></code>（アンダースコア）を使っている。<code class="docutils literal notranslate"><span class="pre">i</span></code>や<code class="docutils literal notranslate"><span class="pre">j</span></code>を使っても良いが，回数を数える以外に役目はない。その様な場合に良く使われるのが<code class="docutils literal notranslate"><span class="pre">_</span></code>である。<code class="docutils literal notranslate"><span class="pre">for</span></code>ループでも同じことが言える。次のコードが例として挙げられる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>２行目に<code class="docutils literal notranslate"><span class="pre">_</span></code>は入っていないので，ループの回数を数える以外の役割はない。</p>
</div>
<p>次に，<code class="docutils literal notranslate"><span class="pre">gauss()</span></code>を紹介する。この関数は，正規分布から生成されたランダム変数を１つ返す。引数は次の様になっている。</p>
<ul class="simple">
<li><p>第１引数：平均値</p></li>
<li><p>第２引数：標準偏差</p></li>
</ul>
<p>従って，次のコードは標準正規分布からのランダム変数を生成する。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>関数名が<code class="docutils literal notranslate"><span class="pre">gauss</span></code>なのは，正規分布はガウス分布とも呼ばれるためである。</p>
<p>次のコードは，平均<code class="docutils literal notranslate"><span class="pre">10</span></code>，標準偏差<code class="docutils literal notranslate"><span class="pre">2</span></code>からランダム変数を生成している。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7.807718166139978
</pre></div>
</div>
</div>
</div>
<p>内包表記を使って，標準正規分布から生成された<code class="docutils literal notranslate"><span class="pre">10</span></code>のランダム変数からなるリストを作成しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[-2.057744144198003,
 -0.4398037772302675,
 -0.03387170214929175,
 0.7656105889161143,
 -0.1566804552275244,
 0.2879044075379996,
 -1.0725386547566755,
 0.06356172701878242,
 -1.2021823972816759,
 -0.6380639029005795]
</pre></div>
</div>
</div>
</div>
</section>
<section id="see">
<h3><code class="docutils literal notranslate"><span class="pre">see</span></code>モジュール<a class="headerlink" href="#see" title="Permalink to this heading">#</a></h3>
<p><a class="reference internal" href="1_Basics_III.html#object"><span class="std std-ref">オブジェクトと属性</span></a>の節で属性を確認する<code class="docutils literal notranslate"><span class="pre">dir()</span></code>関数について説明した。<code class="docutils literal notranslate"><span class="pre">dir()</span></code>は組み込み関数であるため，パッケージやモジュールをインポートしなくても使えるので便利である。しかし通常使う必要がない<code class="docutils literal notranslate"><span class="pre">__</span></code>（<code class="docutils literal notranslate"><span class="pre">_</span></code>が２つ並んでいる）が付いている属性（例えば，<code class="docutils literal notranslate"><span class="pre">.__init__</span></code>）まで表示されてしまう。それらを省いて，属性のリストを見やすく表示するのが<code class="docutils literal notranslate"><span class="pre">see</span></code>モジュールである。</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><code class="docutils literal notranslate"><span class="pre">_</span></code>はunderscoreと読む。<code class="docutils literal notranslate"><span class="pre">_</span></code>が2つ並んだ<code class="docutils literal notranslate"><span class="pre">__</span></code>はdouble underscoresだが，略してdunder（ダンダー）と呼ばれる。また，<code class="docutils literal notranslate"><span class="pre">.__init__</span></code>のような属性は特殊属性と呼ばれるが，ダンダー属性と呼ぶこともある。</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">see</span></code>モジュールの使い方は簡単で，まず次のコードでインポートする。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">see</span> <span class="kn">import</span> <span class="n">see</span>
</pre></div>
</div>
</div>
</div>
<p>後はインポートした関数を<code class="docutils literal notranslate"><span class="pre">dir()</span></code>と同じように使うだけである。簡単な例を考えよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mf">10.99</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dir()</span></code>を使うと通常は必要ないものまで表示される。</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;__abs__&#39;,
 &#39;__add__&#39;,
 &#39;__bool__&#39;,
 &#39;__ceil__&#39;,
 &#39;__class__&#39;,
 &#39;__delattr__&#39;,
 &#39;__dir__&#39;,
 &#39;__divmod__&#39;,
 &#39;__doc__&#39;,
 &#39;__eq__&#39;,
 &#39;__float__&#39;,
 &#39;__floor__&#39;,
 &#39;__floordiv__&#39;,
 &#39;__format__&#39;,
 &#39;__ge__&#39;,
 &#39;__getattribute__&#39;,
 &#39;__getformat__&#39;,
 &#39;__getnewargs__&#39;,
 &#39;__gt__&#39;,
 &#39;__hash__&#39;,
 &#39;__init__&#39;,
 &#39;__init_subclass__&#39;,
 &#39;__int__&#39;,
 &#39;__le__&#39;,
 &#39;__lt__&#39;,
 &#39;__mod__&#39;,
 &#39;__mul__&#39;,
 &#39;__ne__&#39;,
 &#39;__neg__&#39;,
 &#39;__new__&#39;,
 &#39;__pos__&#39;,
 &#39;__pow__&#39;,
 &#39;__radd__&#39;,
 &#39;__rdivmod__&#39;,
 &#39;__reduce__&#39;,
 &#39;__reduce_ex__&#39;,
 &#39;__repr__&#39;,
 &#39;__rfloordiv__&#39;,
 &#39;__rmod__&#39;,
 &#39;__rmul__&#39;,
 &#39;__round__&#39;,
 &#39;__rpow__&#39;,
 &#39;__rsub__&#39;,
 &#39;__rtruediv__&#39;,
 &#39;__setattr__&#39;,
 &#39;__setformat__&#39;,
 &#39;__sizeof__&#39;,
 &#39;__str__&#39;,
 &#39;__sub__&#39;,
 &#39;__subclasshook__&#39;,
 &#39;__truediv__&#39;,
 &#39;__trunc__&#39;,
 &#39;as_integer_ratio&#39;,
 &#39;conjugate&#39;,
 &#39;fromhex&#39;,
 &#39;hex&#39;,
 &#39;imag&#39;,
 &#39;is_integer&#39;,
 &#39;real&#39;]
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">see()</span></code>を使うとダンダー属性は表示されない。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">see</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    +             -             *             /             //            %
    **            +obj          -obj          &lt;             &lt;=            ==
    !=            &gt;             &gt;=            abs()         bool()
    dir()         divmod()      float()       hash()        help()
    int()         repr()        round()       str()
    .as_integer_ratio()         .conjugate()                .fromhex()
    .hex()        .imag         .is_integer()               .real
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">see()</span></code>を使う利点がもう一つある。表示されたリストを見ると，メソッドには<code class="docutils literal notranslate"><span class="pre">()</span></code>が付けられているが，単なるデータ属性には付いていない。（表示さている属性・メソッドが全て使えるわけではないので注意しよう）。例えば，<code class="docutils literal notranslate"><span class="pre">is_integer()</span></code>は整数であれば<code class="docutils literal notranslate"><span class="pre">True</span></code>を返すメソッドであり，<code class="docutils literal notranslate"><span class="pre">.real</span></code>と<code class="docutils literal notranslate"><span class="pre">.imag</span></code>は複素数の実部と虚部を返す属性となる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">is_integer</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">imag</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(10.99, 0.0)
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ここでは<code class="docutils literal notranslate"><span class="pre">see</span></code>関数を直接インポートして使ったが，次のようにインポートすることも可能である。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">see</span>
</pre></div>
</div>
<p>上の例を使うと，この場合は<code class="docutils literal notranslate"><span class="pre">see.see(x)</span></code>として<code class="docutils literal notranslate"><span class="pre">x</span></code>の属性を確認できる。</p>
</div>
</section>
</section>
<section id="id4">
<h2>アルゴリズム<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h2>
<p>コンピューターは<code class="docutils literal notranslate"><span class="pre">0</span></code>と<code class="docutils literal notranslate"><span class="pre">1</span></code>で書かれている機械語しか理解できないが，プログラマーにとって機械語は非常に難解である。つまりプログラマーとコンピューターは直接「会話」ができない。この問題を解決するために，プログラミング言語が開発され「通訳・翻訳」の役割を担っている。<code class="docutils literal notranslate"><span class="pre">Python</span></code>を使う場合は，<code class="docutils literal notranslate"><span class="pre">Python</span></code>コードを書き，それを<code class="docutils literal notranslate"><span class="pre">Python</span></code>が機械語に「通訳」し，コンピューターが命令を実行することになる。結果が表示されると，プログラマーは内容を確認し，コードを追加・修正などをおこない開発が進んでいく。Jupyter Notebookでコードを書く場合でも同じである。</p>
<pre>
+--------------+　　Pythonが「通訳」 　+-------+
|　Pythonコード　| ▷ ▷ ▷ ▷ ▷ ▷ ▷ ▷ ▷　| 機械語　|
+--------------+   　　　　　　　 　   +-------+
       ▲                          　  　 ▽
       ▲                          　　   ▽
       ▲ アルゴリズム       　　　　　　   　▽ 実  
       ▲ 疑似コード　　        　      　  ▽ 行  
       ▲                          　  　 ▽
       ▲                          　　   ▽
+-------------+　　　　内容を確認　  　  +-----+
|　プログラマー　| ◀︎ ◀︎ ◀︎ ◀︎ ◀︎ ◀︎ ◀︎ ◀︎ ◀︎ ◀︎　| 結果 |
+-------------+     　　　　  　　 　 　+-----+

▶︎：プログラマーがおこなう
▷：コンピューターがおこなう
</pre><p>このサイクルの中で<strong>アルゴリズム</strong>は，プログラマーが<code class="docutils literal notranslate"><span class="pre">Python</span></code>コードを書く際に重要な役割を果たす。日本産業規格（JIS X0001）は次のように定義している。</p>
<blockquote>
<div><p>問題を解くためのものであって，明確に定義され，順序付けられた有限個の規則からなる集合</p>
</div></blockquote>
<p>平たく言えば，コンピューターが実行すると正しい結果が保証された計算手続である。更に，その計算手続きはどのプログラミング言語でも使える問題解決の明確な考え方である。</p>
<p>例えば，カレーを作るとしよう。アルゴリズムはその場合のレシピである。ある程度料理ができる人であれば，書かれている手順に沿って作れば美味しいカレーが出来上がるレシピがアルゴリズムである。様々な問題には異なるアルゴリズムがある。また１つの問題には複数のアルゴリズムが存在する。カレーでも色々なレシピがあるのと同じである。</p>
<p>以下では，比較的に簡単であり，且つ代表的な４つのアルゴリズムについて解説する。また，アルゴリズムによって計算速度が異なり，その理由についても考えることにする。</p>
<section id="id5">
<h3>例１：合計<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h3>
<p>次のコードは標準正規分布から抽出した100万個のランダム変数から構成されるリストを作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst1</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>このリストの値を合計するためのアルゴリズムを考える。</p>
<section id="for">
<h4><code class="docutils literal notranslate"><span class="pre">for</span></code>ループ<a class="headerlink" href="#for" title="Permalink to this heading">#</a></h4>
<p>まず<code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使うアルゴリズムを考えてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sum_for_loop</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>  <span class="c1">#1</span>
    
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>               <span class="c1">#2</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>       <span class="c1">#3</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="n">i</span>          <span class="c1">#4</span>
    
    <span class="k">return</span> <span class="n">x</span>            <span class="c1">#5</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループでは<code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素を１つずつ<code class="docutils literal notranslate"><span class="pre">x</span></code>に加算することになるが，その初期値を<code class="docutils literal notranslate"><span class="pre">0</span></code>とする。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループの開始</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>: 累積加算演算子<code class="docutils literal notranslate"><span class="pre">+=</span></code>を使い要素を<code class="docutils literal notranslate"><span class="pre">x</span></code>に加算する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループ終了後に<code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素の合計である<code class="docutils literal notranslate"><span class="pre">x</span></code>を返す。</p></li>
</ul>
<p>実際に計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_for_loop</span><span class="p">(</span><span class="n">lst1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>277.7031433431705
</pre></div>
</div>
</div>
</div>
</section>
<section id="while">
<h4><code class="docutils literal notranslate"><span class="pre">while</span></code>ループ<a class="headerlink" href="#while" title="Permalink to this heading">#</a></h4>
<p>次に<code class="docutils literal notranslate"><span class="pre">while</span></code>ループを使う場合のコードを考えてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sum_while_loop</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>     <span class="c1">#1</span>
    
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>                    <span class="c1">#2</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>                  <span class="c1">#2a</span>
    
    <span class="k">while</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>    <span class="c1">#3</span>
        
        <span class="n">x</span> <span class="o">+=</span> <span class="n">lst</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>        <span class="c1">#4</span>
        <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>             <span class="c1">#4a</span>
    
    <span class="k">return</span> <span class="n">x</span>                 <span class="c1">#5</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループの<code class="docutils literal notranslate"><span class="pre">x</span></code>と同じ役目をする。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2a</span></code>: <code class="docutils literal notranslate"><span class="pre">while</span></code>ループでは，<code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素を抽出する際にインデックス番号を使うことになるが，<code class="docutils literal notranslate"><span class="pre">idx</span></code>（indexの略）はインデックス番号を捉えている。<code class="docutils literal notranslate"><span class="pre">lst</span></code>の最初の項から抽出するために初期値を<code class="docutils literal notranslate"><span class="pre">0</span></code>としている。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: <code class="docutils literal notranslate"><span class="pre">while</span></code>ループが開始され，<code class="docutils literal notranslate"><span class="pre">idx&lt;len(lst)</span></code>が<code class="docutils literal notranslate"><span class="pre">False</span></code>となる時点でループは終了する。例として，<code class="docutils literal notranslate"><span class="pre">lst=[0,10,20]</span></code>としてみよう。<code class="docutils literal notranslate"><span class="pre">len(lst)</span></code>は<code class="docutils literal notranslate"><span class="pre">3</span></code>を返すことになり，<code class="docutils literal notranslate"><span class="pre">idx</span></code>が<code class="docutils literal notranslate"><span class="pre">3</span></code>になると<code class="docutils literal notranslate"><span class="pre">idx&lt;len(lst)</span></code>が<code class="docutils literal notranslate"><span class="pre">False</span></code>となるため，その時点で（<code class="docutils literal notranslate"><span class="pre">#5</span></code>以下は実行されずに）<code class="docutils literal notranslate"><span class="pre">while</span></code>ループは終了する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>: <code class="docutils literal notranslate"><span class="pre">lst[idx]</span></code>では<code class="docutils literal notranslate"><span class="pre">lst</span></code>の<code class="docutils literal notranslate"><span class="pre">idx</span></code>番目の要素を抽出し，それを<code class="docutils literal notranslate"><span class="pre">+=</span></code>を使い<code class="docutils literal notranslate"><span class="pre">x</span></code>に加算する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4a</span></code>: 次のループで<code class="docutils literal notranslate"><span class="pre">lst</span></code>の次の要素を抽出できるように<code class="docutils literal notranslate"><span class="pre">idx</span></code>を<code class="docutils literal notranslate"><span class="pre">1</span></code>増やし<code class="docutils literal notranslate"><span class="pre">while</span></code>ループを継続する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループ終了後に<code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素の合計である<code class="docutils literal notranslate"><span class="pre">x</span></code>を返す。</p></li>
</ul>
<p>実際に計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_while_loop</span><span class="p">(</span><span class="n">lst1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>277.7031433431705
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code>ループと同じ値となっていることが確認できる。</p>
</section>
<section id="id6">
<h4>実行スピード比較<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h4>
<p>次に２つのコードの終了までの時間を比較してみよう。ここでは<a class="reference external" href="https://ipython.readthedocs.io/en/stable/interactive/magics.html">マジック・コマンド</a>と呼ばれる<code class="docutils literal notranslate"><span class="pre">%timeit</span></code>を使うが，使い方は簡単で行頭に<code class="docutils literal notranslate"><span class="pre">%timeit</span></code>と半角スペースを置いて実行コードを書くだけである。まず<code class="docutils literal notranslate"><span class="pre">sum_for_loop()</span></code>関数を実行してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> sum_for_loop(lst1)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>65 ms ± 12.7 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p>表示される結果は，使うPCのスペックなどによって若干異なることになる。
結果の解釈方法を説明するため，次のような結果になったとしよう。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>MMM ms ± NNN µs per loop (mean ± std. dev. of YYY runs, XXX loops each)
</pre></div>
</div>
<p>次のように解釈する。</p>
<ul class="simple">
<li><p>コードを<code class="docutils literal notranslate"><span class="pre">XXX</span></code>回実行する試行を<code class="docutils literal notranslate"><span class="pre">YYY</span></code>回おこない（合計で<code class="docutils literal notranslate"><span class="pre">XXX</span></code><span class="math notranslate nohighlight">\(\times\)</span><code class="docutils literal notranslate"><span class="pre">YYY</span></code>回），その結果の平均である<code class="docutils literal notranslate"><span class="pre">mean</span></code>は<code class="docutils literal notranslate"><span class="pre">MMM</span> <span class="pre">ms</span></code>であり，標準偏差である<code class="docutils literal notranslate"><span class="pre">std.</span> <span class="pre">dev.</span></code>は<code class="docutils literal notranslate"><span class="pre">NNN</span> <span class="pre">µs</span></code>である。ここで</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ms</span></code>：ミリ秒（1/1000秒）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">µs</span></code>：マイクロ秒（1/1,000,000秒）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ns</span></code>：ナノ秒（1/1,000,000,000秒; 10億分の１秒）</p></li>
</ul>
</li>
<li><p>試行する度に結果が異り，その変動を標準偏差で捉えている。結果は正規分布に従うと仮定すると，約68％の結果が平均<span class="math notranslate nohighlight">\(\pm\)</span>標準偏差の範囲内に収まることになる。</p></li>
</ul>
<p>次に<code class="docutils literal notranslate"><span class="pre">sum_while_loop()</span></code>の速度を計測してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> sum_while_loop(lst1)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>189 ms ± 32.6 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code>ループに比べて<code class="docutils literal notranslate"><span class="pre">for</span></code>ループが約4倍速いことが確認できる。リストから要素を一つずつ抽出し合計するというアルゴリズムでも，コードにどのように表現するかによって速度に大きな違いが発生している。</p>
<p>では，なぜそのような大きな違いがあるのだろうか。それは次の２つの違いに起因する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sum_for_loop()</span></code>と<code class="docutils literal notranslate"><span class="pre">sum_while_loop()</span></code>の<code class="docutils literal notranslate"><span class="pre">#3</span></code>を考えてみよう。前者の場合，ループ毎に<code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素を<code class="docutils literal notranslate"><span class="pre">i</span></code>に割り当てることを行なっている。一方，後者では，ループ毎に<code class="docutils literal notranslate"><span class="pre">idx&lt;len(lst)</span></code>の条件が満たされているかどうかを確認する必要がある。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum_while_loop()</span></code>では<code class="docutils literal notranslate"><span class="pre">#2a</span></code>と<code class="docutils literal notranslate"><span class="pre">#4a</span></code>が追加されており，「割り当て」と言う意味では<code class="docutils literal notranslate"><span class="pre">sum_for_loop()</span></code>の<code class="docutils literal notranslate"><span class="pre">#3</span></code>と同じである。</p></li>
</ul>
<p>従って，<code class="docutils literal notranslate"><span class="pre">while</span></code>ループには<code class="docutils literal notranslate"><span class="pre">idx&lt;len(lst)</span></code>が<code class="docutils literal notranslate"><span class="pre">True</span></code>なのか<code class="docutils literal notranslate"><span class="pre">False</span></code>なのかの確認が追加作業となり，それが時間が掛かる要因となっている。</p>
<p>最後に，組み込み関数である<code class="docutils literal notranslate"><span class="pre">sum()</span></code>の速度を計測してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> sum(lst1)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.86 ms ± 54.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">sum_while_loop()</span></code>関数よりも6倍以上も速いことが分かる。組み込み関数は様々なトリックを使い最適化されていることが伺える。</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>複数行にまたがるコードの実行スピードを計測する場合は，下の例のように<code class="docutils literal notranslate"><span class="pre">%%timeit</span></code>を１行目に置き，2行目以降にコードを書くと良いだろう。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="n">timeit</span>
<span class="n">sum_while_loop</span><span class="p">(</span><span class="n">lst1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Pythonは楽しいね(^o^)/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="id7">
<h3>例２：値の探索<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h3>
<p>次のコードは<code class="docutils literal notranslate"><span class="pre">0</span></code>から<code class="docutils literal notranslate"><span class="pre">999,999</span></code>までの整数が並ぶリストを作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>ここで考えるのは，<code class="docutils literal notranslate"><span class="pre">999,000</span></code>が<code class="docutils literal notranslate"><span class="pre">lst2</span></code>にあるかどうかを確かめることである。具体的には，<code class="docutils literal notranslate"><span class="pre">lst2</span></code>の最初の要素から一つずつ確認し</p>
<ul class="simple">
<li><p>見つかれば<code class="docutils literal notranslate"><span class="pre">1</span></code>を返す（探索は途中で終了）</p></li>
<li><p>見つからなければ<code class="docutils literal notranslate"><span class="pre">-1</span></code>を返す（最後の要素まで確認する）</p></li>
</ul>
<p>関数を考える。</p>
<section id="id8">
<h4><code class="docutils literal notranslate"><span class="pre">for</span></code>ループ<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使うコードを考えよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_for_loop</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">lst</span><span class="p">):</span> <span class="c1">#1</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>                 <span class="c1">#2</span>

        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>           <span class="c1">#3</span>
            <span class="k">return</span> <span class="mi">1</span>              <span class="c1">#4</span>
            <span class="k">break</span>                 <span class="c1">#5</span>
    
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>                     <span class="c1">#6</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数の<code class="docutils literal notranslate"><span class="pre">target</span></code>は探索する数字であり，<code class="docutils literal notranslate"><span class="pre">lst</span></code>はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループの開始</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>〜<code class="docutils literal notranslate"><span class="pre">#5</span></code>: <code class="docutils literal notranslate"><span class="pre">i</span></code>が<code class="docutils literal notranslate"><span class="pre">target</span></code>と等しければ<code class="docutils literal notranslate"><span class="pre">1</span></code>を返し，<code class="docutils literal notranslate"><span class="pre">for</span></code>ループは終了する。これで関数の実行は終わり。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#6</span></code>: <code class="docutils literal notranslate"><span class="pre">#2</span></code>の<code class="docutils literal notranslate"><span class="pre">for</span></code>ループが<code class="docutils literal notranslate"><span class="pre">break</span></code>されずに終了した場合にのみ実行され<code class="docutils literal notranslate"><span class="pre">-1</span></code>が返される。即ち，<code class="docutils literal notranslate"><span class="pre">lst</span></code>の最後まで探索し，<code class="docutils literal notranslate"><span class="pre">target</span></code>がない場合に実行される行である。</p></li>
</ul>
<p>実際に計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_for_loop</span><span class="p">(</span><span class="mi">999_000</span><span class="p">,</span> <span class="n">lst2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
</section>
<section id="id9">
<h4><code class="docutils literal notranslate"><span class="pre">while</span></code>ループ<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h4>
<p>次に<code class="docutils literal notranslate"><span class="pre">while</span></code>ループを使う場合を考えてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_while_loop</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">lst</span><span class="p">):</span> <span class="c1">#1</span>
    
    <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>                         <span class="c1">#2</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>                     <span class="c1">#3</span>
        
        <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>         <span class="c1">#4</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>               <span class="c1">#5</span>
        
        <span class="k">if</span> <span class="n">lst</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>      <span class="c1">#6</span>
            <span class="k">return</span> <span class="mi">1</span>                <span class="c1">#7</span>
        
        <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>                    <span class="c1">#8</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数の<code class="docutils literal notranslate"><span class="pre">target</span></code>は探索する数字であり，<code class="docutils literal notranslate"><span class="pre">lst</span></code>はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">while</span></code>ループでは，<code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素を抽出する際にインデックス番号を使うことになるが，<code class="docutils literal notranslate"><span class="pre">idx</span></code>（indexの略）はインデックス番号を捉えている。<code class="docutils literal notranslate"><span class="pre">#4</span></code>と<code class="docutils literal notranslate"><span class="pre">#6</span></code>で使う。<code class="docutils literal notranslate"><span class="pre">lst</span></code>の最初の項から抽出するために初期値を<code class="docutils literal notranslate"><span class="pre">0</span></code>としている。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: <code class="docutils literal notranslate"><span class="pre">while</span></code>ループの開始。<code class="docutils literal notranslate"><span class="pre">#5</span></code>もしくは<code class="docutils literal notranslate"><span class="pre">#7</span></code>が実行されるまで<code class="docutils literal notranslate"><span class="pre">while</span></code>ループは継続する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>〜<code class="docutils literal notranslate"><span class="pre">#5</span></code>: <code class="docutils literal notranslate"><span class="pre">#4</span></code>の条件は<code class="docutils literal notranslate"><span class="pre">lst</span></code>の最後の要素まで確認した場合にのみ満たされる。その場合，<code class="docutils literal notranslate"><span class="pre">-1</span></code>が返される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#6</span></code>〜<code class="docutils literal notranslate"><span class="pre">#7</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の<code class="docutils literal notranslate"><span class="pre">idx</span></code>番目の要素と<code class="docutils literal notranslate"><span class="pre">target</span></code>が等しい場合に<code class="docutils literal notranslate"><span class="pre">1</span></code>が返される。その時点で関数の実行（<code class="docutils literal notranslate"><span class="pre">while</span></code>ループも含めて）は終了する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#8</span></code>: <code class="docutils literal notranslate"><span class="pre">#4</span></code>と<code class="docutils literal notranslate"><span class="pre">#5</span></code>の条件が<code class="docutils literal notranslate"><span class="pre">False</span></code>であれば，<code class="docutils literal notranslate"><span class="pre">idx</span></code>を<code class="docutils literal notranslate"><span class="pre">1</span></code>増加させて<code class="docutils literal notranslate"><span class="pre">while</span></code>ループを継続する。</p></li>
</ul>
<p>実際に計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_while_loop</span><span class="p">(</span><span class="mi">999_000</span><span class="p">,</span> <span class="n">lst2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">search_for_loop()</span></code>関数と<code class="docutils literal notranslate"><span class="pre">search_while_loop()</span></code>関数の実行スピードを比較してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> search_for_loop(999_000, lst2)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>31.5 ms ± 417 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> search_while_loop(999_000, lst2)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>156 ms ± 2.5 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code>ループより<code class="docutils literal notranslate"><span class="pre">while</span></code>ループは4倍以上遅いことがわかる。もう理由は明らかであろう。<code class="docutils literal notranslate"><span class="pre">search_linear_for()</span></code>関数ではループ一回毎に１つの<code class="docutils literal notranslate"><span class="pre">if</span></code>文の条件<code class="docutils literal notranslate"><span class="pre">#3</span></code>を確認する必要があるが，<code class="docutils literal notranslate"><span class="pre">search_linear_while()</span></code>では条件が<code class="docutils literal notranslate"><span class="pre">#4</span></code>と<code class="docutils literal notranslate"><span class="pre">#6</span></code>の２つがある。この確認作業の回数の差が数字として現れている。このことから分かることは，<code class="docutils literal notranslate"><span class="pre">while</span></code>ループであっても条件を１つにすれば速度が倍になると言うことである。それを実現するのが次に考える<strong>番兵法</strong>と呼ばれるアルゴリズムである。</p>
</section>
<section id="id10">
<h4>番兵法<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h4>
<p>番兵法は<code class="docutils literal notranslate"><span class="pre">while</span></code>ループを使うが，次の手続きが必要となる。</p>
<ul class="simple">
<li><p>リストの最後に探索する値を追加する</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">search_while_loop()</span></code>関数との違いはこの点だけである。これにより，実質的には<code class="docutils literal notranslate"><span class="pre">search_linear_while()</span></code>の条件<code class="docutils literal notranslate"><span class="pre">#4</span></code>が不要になり実行スピードの高速化される。コードを確認してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_sentinel</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">lst</span><span class="p">):</span> <span class="c1">#1</span>
    
    <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>               <span class="c1">#2</span>

    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>            <span class="c1">#3</span>
    
    <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>                       <span class="c1">#4</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>                   <span class="c1">#5</span>
        
        <span class="k">if</span> <span class="n">lst</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>    <span class="c1">#6</span>
            <span class="k">break</span>                 <span class="c1">#7</span>
            
        <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>                  <span class="c1">#8</span>

    <span class="k">if</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">:</span>                <span class="c1">#9</span>
        <span class="k">return</span> <span class="mi">1</span>                  <span class="c1">#10</span>
    
    <span class="k">else</span><span class="p">:</span>                         <span class="c1">#11</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>                 <span class="c1">#12</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数の<code class="docutils literal notranslate"><span class="pre">target</span></code>は探索する数字であり，<code class="docutils literal notranslate"><span class="pre">lst</span></code>はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素数を<code class="docutils literal notranslate"><span class="pre">size</span></code>に割り当てる。<code class="docutils literal notranslate"><span class="pre">size</span></code>は<code class="docutils literal notranslate"><span class="pre">#9</span></code>で使うことになる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の最後に<code class="docutils literal notranslate"><span class="pre">target</span></code>を追加する。これが「番兵」である。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素を抽出する際にインデックス番号を使うことになるが，<code class="docutils literal notranslate"><span class="pre">idx</span></code>（indexの略）はインデックス番号を捉えている。<code class="docutils literal notranslate"><span class="pre">#6</span></code>，<code class="docutils literal notranslate"><span class="pre">#8</span></code>，<code class="docutils literal notranslate"><span class="pre">#9</span></code>で使う。<code class="docutils literal notranslate"><span class="pre">lst</span></code>の最初の項から抽出するために初期値を<code class="docutils literal notranslate"><span class="pre">0</span></code>としている。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>: <code class="docutils literal notranslate"><span class="pre">while</span></code>ループの開始。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#6</span></code>〜<code class="docutils literal notranslate"><span class="pre">#7</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の<code class="docutils literal notranslate"><span class="pre">idx</span></code>番目の要素と<code class="docutils literal notranslate"><span class="pre">target</span></code>が等しい場合は<code class="docutils literal notranslate"><span class="pre">break</span></code>を発動させ<code class="docutils literal notranslate"><span class="pre">while</span></code>を中断する。等しくない場合は<code class="docutils literal notranslate"><span class="pre">#7</span></code>を実行せずに<code class="docutils literal notranslate"><span class="pre">#8</span></code>で<code class="docutils literal notranslate"><span class="pre">idx</span></code>を<code class="docutils literal notranslate"><span class="pre">1</span></code>増加さる。<code class="docutils literal notranslate"><span class="pre">#3</span></code>で<code class="docutils literal notranslate"><span class="pre">target</span></code>（番兵）が<code class="docutils literal notranslate"><span class="pre">lst</span></code>に追加されたので，<code class="docutils literal notranslate"><span class="pre">lst</span></code>に<code class="docutils literal notranslate"><span class="pre">target</span></code>がなくても<code class="docutils literal notranslate"><span class="pre">#6</span></code>は必ず満たされて<code class="docutils literal notranslate"><span class="pre">break</span></code>が発動される。これが番兵の役割であり，高速化のための仕込みとなる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#9</span></code>〜<code class="docutils literal notranslate"><span class="pre">#12</span></code>: <code class="docutils literal notranslate"><span class="pre">while</span></code>ループが中断された後に実行される。<code class="docutils literal notranslate"><span class="pre">#9</span></code>の条件が<code class="docutils literal notranslate"><span class="pre">True</span></code>の場合は<code class="docutils literal notranslate"><span class="pre">lst</span></code>に<code class="docutils literal notranslate"><span class="pre">target</span></code>が含まれたと言う意味になるため<code class="docutils literal notranslate"><span class="pre">1</span></code>を返す。一方，<code class="docutils literal notranslate"><span class="pre">#9</span></code>の条件が<code class="docutils literal notranslate"><span class="pre">False</span></code>の場合（即ち，<code class="docutils literal notranslate"><span class="pre">idx</span></code>と<code class="docutils literal notranslate"><span class="pre">size</span></code>は等しい場合），<code class="docutils literal notranslate"><span class="pre">idx</span></code>は番兵のインデックスとなるため<code class="docutils literal notranslate"><span class="pre">-1</span></code>を返す。</p></li>
</ul>
<p>実際に計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_sentinel</span><span class="p">(</span><span class="mi">999_000</span><span class="p">,</span> <span class="n">lst2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p>実行スピードを計測してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> search_sentinel(999_000, lst2)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>83.2 ms ± 2.16 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">search_while_loop()</span></code>関数と比べると約2倍高速化できた。</p>
</section>
<section id="id11">
<h4>組み込み関数<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h4>
<p>組み込み関数に<code class="docutils literal notranslate"><span class="pre">1</span></code>もしくは<code class="docutils literal notranslate"><span class="pre">-1</span></code>を返す関数は見当たらないため，類似するメソッドを考えてみよう。リストには<code class="docutils literal notranslate"><span class="pre">.index()</span></code>というメソッドが用意されており，引数に要素を指定すると，その要素のインデックス番号を返す。試してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst2</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">999_000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>999000
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">999_000</span></code>は<code class="docutils literal notranslate"><span class="pre">lst2</span></code>の<code class="docutils literal notranslate"><span class="pre">999000</span></code>番目の要素だという意味。実行速度を計測してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> lst2.index(999_000)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13.4 ms ± 116 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">search_for_loop()</span></code>関数よりも約2倍速い。最適化されていることが伺える。</p>
</section>
</section>
<section id="id12">
<h3>例３：最小値の探索<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h3>
<p>次のコードは標準正規分布から抽出した100万個のランダム変数から構成されるリストを作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst3</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>この中から最小値を探索するアルゴリズムを考えてみよう。<code class="docutils literal notranslate"><span class="pre">lst3</span></code>の全ての要素を確認する必要があるので<code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使おう。</p>
<section id="id13">
<h4>直接的な探索<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h4>
<p>まず，リストの最小値を直接探索するコードを考えてみる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_min</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>  <span class="c1">#1</span>
    
    <span class="n">min_</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>     <span class="c1">#2</span>
    
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>     <span class="c1">#3</span>
        
        <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">min_</span><span class="p">:</span>  <span class="c1">#4            </span>
            <span class="n">min_</span> <span class="o">=</span> <span class="n">v</span>  <span class="c1">#5</span>
    
    <span class="k">return</span> <span class="n">min_</span>       <span class="c1">#6</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数<code class="docutils literal notranslate"><span class="pre">lst</span></code>はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の<code class="docutils literal notranslate"><span class="pre">0</span></code>番目の値を<code class="docutils literal notranslate"><span class="pre">min_</span></code>に割り当てる。<code class="docutils literal notranslate"><span class="pre">#3</span></code>の<code class="docutils literal notranslate"><span class="pre">for</span></code>ループで更に小さな値が発見されれば，<code class="docutils literal notranslate"><span class="pre">min_</span></code>の値と入れ替えることにする。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>に対する<code class="docutils literal notranslate"><span class="pre">for</span></code>ループの開始。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>〜<code class="docutils literal notranslate"><span class="pre">#5</span></code>: <code class="docutils literal notranslate"><span class="pre">v</span></code>が<code class="docutils literal notranslate"><span class="pre">min_</span></code>より小さければ<code class="docutils literal notranslate"><span class="pre">min_</span></code>に割り当てる。そうでなければ，<code class="docutils literal notranslate"><span class="pre">min_</span></code>の値は変えない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#6</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループが終わった後（即ち，<code class="docutils literal notranslate"><span class="pre">lst</span></code>の値を全て確認した後），<code class="docutils literal notranslate"><span class="pre">min_</span></code>の値を返す。</p></li>
</ul>
<p>実際に計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_min</span><span class="p">(</span><span class="n">lst3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-4.366872827516397
</pre></div>
</div>
</div>
</div>
</section>
<section id="id14">
<h4>間接的な探索<a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h4>
<p>リストの要素はインデックス番号を使ってアクセスすることができる。それを利用して，上のコードをインデックス番号を使って間接的に要素にアクセスする場合を考える。即ち，最小値のインデックスを探し，最終的に最小値を返す関数となる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_min_idx</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>            <span class="c1">#1</span>
    
    <span class="n">n_lst</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>                <span class="c1">#2</span>
    
    <span class="n">idx_min</span> <span class="o">=</span> <span class="mi">0</span>                     <span class="c1">#3</span>
    
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_lst</span><span class="p">):</span>        <span class="c1">#4</span>
        
        <span class="k">if</span> <span class="n">lst</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">lst</span><span class="p">[</span><span class="n">idx_min</span><span class="p">]:</span> <span class="c1">#5</span>
            <span class="n">idx_min</span> <span class="o">=</span> <span class="n">idx</span>           <span class="c1">#6</span>
    
    <span class="k">return</span> <span class="n">lst</span><span class="p">[</span><span class="n">idx_min</span><span class="p">]</span>             <span class="c1">#7</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数<code class="docutils literal notranslate"><span class="pre">lst</span></code>はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素数を<code class="docutils literal notranslate"><span class="pre">n_lst</span></code>に割り当てる。<code class="docutils literal notranslate"><span class="pre">n_lst</span></code>は<code class="docutils literal notranslate"><span class="pre">#4</span></code>で使うことになる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: <code class="docutils literal notranslate"><span class="pre">idx_min</span></code>は最小値の要素のインデックス番号を割り当てる変数として使う。<code class="docutils literal notranslate"><span class="pre">0</span></code>番目の要素から考えるので，初期値として<code class="docutils literal notranslate"><span class="pre">0</span></code>を設定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>: <code class="docutils literal notranslate"><span class="pre">range(n_lst)</span></code>に対する<code class="docutils literal notranslate"><span class="pre">for</span></code>ループの開始。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>〜<code class="docutils literal notranslate"><span class="pre">#6</span></code>: <code class="docutils literal notranslate"><span class="pre">lst[idx_min]</span></code>は，その時点で最小値となる値である。その値より<code class="docutils literal notranslate"><span class="pre">lst[idx]</span></code>が小さい場合，<code class="docutils literal notranslate"><span class="pre">idx</span></code>を<code class="docutils literal notranslate"><span class="pre">idx_min</span></code>に割り当てることにより<code class="docutils literal notranslate"><span class="pre">idx_min</span></code>のインデックス番号を更新する。そうでない場合は<code class="docutils literal notranslate"><span class="pre">idx_min</span></code>の値は変更しない。
が<code class="docutils literal notranslate"><span class="pre">min_</span></code>より小さければ<code class="docutils literal notranslate"><span class="pre">min_</span></code>に割り当てる。そうでなければ，<code class="docutils literal notranslate"><span class="pre">min_</span></code>の値は変えない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#7</span></code>: <code class="docutils literal notranslate"><span class="pre">for</span></code>ループが終わった後（即ち，<code class="docutils literal notranslate"><span class="pre">lst</span></code>の値を全て確認した後），<code class="docutils literal notranslate"><span class="pre">idx_min</span></code>に対応する要素を返す。</p></li>
</ul>
<p>実際に計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_min_idx</span><span class="p">(</span><span class="n">lst3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-4.366872827516397
</pre></div>
</div>
</div>
</div>
</section>
<section id="id15">
<h4>実行スピード比較<a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h4>
<p>それぞれのコードの実行速度を比べてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> search_min(lst3)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>30.6 ms ± 819 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> search_min_idx(lst3)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>108 ms ± 2.11 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p>間接的にインデックス番号を使うと実行速度を減速させることになる。</p>
<p>次に組み込み関数である<code class="docutils literal notranslate"><span class="pre">min()</span></code>と比べてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">min</span><span class="p">(</span><span class="n">lst3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-4.366872827516397
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> min(lst3)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>14.8 ms ± 173 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</pre></div>
</div>
</div>
</div>
<p>直接的な方法より2倍以上高速実行されている。</p>
</section>
</section>
<section id="id16">
<h3>例４：ソート<a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h3>
<p>次のコードは<code class="docutils literal notranslate"><span class="pre">0</span></code>から<code class="docutils literal notranslate"><span class="pre">999</span></code>までの整数をランダムに並べたリストを作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst4</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1_000</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>このリストを昇順に並び替えるコードを考える。</p>
<section id="id17">
<h4>単純選択ソート<a class="headerlink" href="#id17" title="Permalink to this heading">#</a></h4>
<p>最初に考えるアルゴリズムである単純選択ソートは次のような考え方に基づいている。</p>
<p>リストには<code class="docutils literal notranslate"><span class="pre">0</span></code>番目から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素があるとしよう。</p>
<ul class="simple">
<li><p>要素の数は<code class="docutils literal notranslate"><span class="pre">n</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n&gt;1</span></code>とする。</p></li>
</ul>
<p>アルゴリズム（説明をより明確になるようにループを<code class="docutils literal notranslate"><span class="pre">0</span></code>回目から数える。）</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>番目から最後までの要素の最小値を見つける（内側ループ）</p></li>
<li><p>最小値を<code class="docutils literal notranslate"><span class="pre">0</span></code>番目の要素と入れ替える（値の入れ替え）</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>番目から最後までの要素の最小値を見つける（内側ループ）</p></li>
<li><p>最小値を<code class="docutils literal notranslate"><span class="pre">1</span></code>番目の要素と入れ替える（値の入れ替え）</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code>番目から最後までの要素の最小値を見つける（内側ループ）</p></li>
<li><p>最小値を<code class="docutils literal notranslate"><span class="pre">2</span></code>番目の要素と入れ替える（値の入れ替え）</p></li>
</ul>
</li>
<li><p>……</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-2</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目から最後までの要素の最小値を見つける（内側ループ）</p></li>
<li><p>最小値を<code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目の要素と入れ替える（値の入れ替え）</p></li>
</ul>
</li>
</ul>
<p>（注意）<code class="docutils literal notranslate"><span class="pre">n-1</span></code>回目のループは必要ない。</p>
<p>この手順に基づくコードを確認しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">insertion_sort</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>       <span class="c1">#1</span>
    
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>               <span class="c1">#2</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>       <span class="c1">#3</span>
        
        <span class="n">i_min</span> <span class="o">=</span> <span class="n">i</span>              <span class="c1">#4</span>
        
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span> <span class="c1">#5</span>
            
            <span class="k">if</span> <span class="n">lst</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">lst</span><span class="p">[</span><span class="n">i_min</span><span class="p">]:</span>  <span class="c1">#6  </span>
                <span class="n">i_min</span> <span class="o">=</span> <span class="n">j</span>            <span class="c1">#7</span>
        
        <span class="n">lst</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lst</span><span class="p">[</span><span class="n">i_min</span><span class="p">]</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[</span><span class="n">i_min</span><span class="p">],</span> <span class="n">lst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="c1">#8</span>
    
    <span class="k">return</span> <span class="n">lst</span>                 <span class="c1">#9</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数<code class="docutils literal notranslate"><span class="pre">lst</span></code>はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素数を<code class="docutils literal notranslate"><span class="pre">n</span></code>に割り当てる。<code class="docutils literal notranslate"><span class="pre">n</span></code>は<code class="docutils literal notranslate"><span class="pre">#3</span></code>と<code class="docutils literal notranslate"><span class="pre">#5</span></code>で使うことになる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: 上の説明にある「外側ループ」に対応している。合計で<code class="docutils literal notranslate"><span class="pre">n-2</span></code>回のループ計算をおこなう（最後のインデックス番号である<code class="docutils literal notranslate"><span class="pre">n-1</span></code>を使ったループを考える必要はないため）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>: <code class="docutils literal notranslate"><span class="pre">i_min</span></code>は<code class="docutils literal notranslate"><span class="pre">#5</span></code>の<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ（上の説明にある「内側ループ」）で見つかる最小値を割り当てる変数のインデックス番号として使う。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>: 上の説明にある「内側ループ」に対応している。<code class="docutils literal notranslate"><span class="pre">i</span></code>を所与として，<code class="docutils literal notranslate"><span class="pre">i+1</span></code>から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目までのループとなる（最小値を探索するためには最後まで確認する必要があるため）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#6</span></code>〜<code class="docutils literal notranslate"><span class="pre">#7</span></code>: <code class="docutils literal notranslate"><span class="pre">lst[j]</span></code>が<code class="docutils literal notranslate"><span class="pre">lst[i_min]</span></code>より小さければ<code class="docutils literal notranslate"><span class="pre">j</span></code>を<code class="docutils literal notranslate"><span class="pre">i_min</span></code>に割り当てる。そうでなければ，<code class="docutils literal notranslate"><span class="pre">i_min</span></code>の値は変えない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#8</span></code>: 上の説明にある「値を入れ替え」に対応している。<code class="docutils literal notranslate"><span class="pre">#5</span></code>の内側ループが終わった後（即ち，<code class="docutils literal notranslate"><span class="pre">i+1</span></code>から<code class="docutils literal notranslate"><span class="pre">lst</span></code>の全ての値を確認した後），<code class="docutils literal notranslate"><span class="pre">lst[i]</span></code>と<code class="docutils literal notranslate"><span class="pre">lst[i_min]</span></code>入れ替えている。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#9</span></code>: 外側ループが終わった後，<code class="docutils literal notranslate"><span class="pre">lst</span></code>を返す。</p></li>
</ul>
<p>コードを実行し，最初の<code class="docutils literal notranslate"><span class="pre">10</span></code>の要素を表示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">insertion_sort</span><span class="p">(</span><span class="n">lst4</span><span class="p">)</span>
<span class="n">res</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 2, 2, 4, 5, 6, 6, 9, 9]
</pre></div>
</div>
</div>
</div>
<p>最後の<code class="docutils literal notranslate"><span class="pre">10</span></code>の要素を表示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="p">[</span><span class="mi">990</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[990, 990, 993, 997, 997, 999, 999, 1000, 1000, 1000]
</pre></div>
</div>
</div>
</div>
<p>昇順に並んでいることが確認できる。</p>
</section>
<section id="id18">
<h4>バブル・ソート<a class="headerlink" href="#id18" title="Permalink to this heading">#</a></h4>
<p>次にバブル・ソートと呼ばれるアルゴリズムを考えてみよう。手順は次の内容となる。</p>
<p>リストには<code class="docutils literal notranslate"><span class="pre">0</span></code>番目から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素があるとしよう。</p>
<ul class="simple">
<li><p>要素の数は<code class="docutils literal notranslate"><span class="pre">n</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n&gt;1</span></code>とする。</p></li>
</ul>
<p>アルゴリズム（ここではループを<code class="docutils literal notranslate"><span class="pre">1</span></code>回目から数える。）</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p>（以下の手順が内側ループ）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目と<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目（最後）の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-3</span></code>番目と<code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p>……</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>番目と<code class="docutils literal notranslate"><span class="pre">2</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>番目と<code class="docutils literal notranslate"><span class="pre">1</span></code>番目の要素を比べる</p></li>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
<li><p>これで<code class="docutils literal notranslate"><span class="pre">0</span></code>番目の要素は<code class="docutils literal notranslate"><span class="pre">0</span></code>番目から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素の最小値となる。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p>以下の手順が内側ループ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目と<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-3</span></code>番目と<code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p>……</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code>番目と<code class="docutils literal notranslate"><span class="pre">3</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>番目と<code class="docutils literal notranslate"><span class="pre">2</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p>これで<code class="docutils literal notranslate"><span class="pre">1</span></code>番目の要素は<code class="docutils literal notranslate"><span class="pre">1</span></code>番目から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素の最小値となる。</p></li>
</ul>
</li>
<li><p>……</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-2</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p>以下の手順が内側ループ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目と<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-3</span></code>番目と<code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p>これで<code class="docutils literal notranslate"><span class="pre">n-3</span></code>番目の要素は<code class="docutils literal notranslate"><span class="pre">n-3</span></code>番目から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素の最小値となる。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-1</span></code>回目のループ（外側ループ）</p>
<ul>
<li><p>以下の手順が内側ループ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目と<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素を比べる</p>
<ul>
<li><p>小さい方を左に，大きい方を右に入れ替える</p></li>
<li><p>同じであれば何もしない</p></li>
</ul>
</li>
<li><p>これで<code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目の要素は<code class="docutils literal notranslate"><span class="pre">n-2</span></code>番目から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>番目の要素の最小値となる。</p></li>
</ul>
</li>
<li><p>完成！</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bubble_sort</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>    <span class="c1">#1</span>
    
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>         <span class="c1">#2</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span> <span class="c1">#3</span>
        
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span> <span class="c1">#4</span>
            
            <span class="k">if</span> <span class="n">lst</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">lst</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>   <span class="c1">#5                </span>
                <span class="n">lst</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lst</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">lst</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#6</span>
    
    <span class="k">return</span> <span class="n">lst</span>           <span class="c1">#7</span>
</pre></div>
</div>
</div>
</div>
<p>＜コードの説明＞<br></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>: 引数<code class="docutils literal notranslate"><span class="pre">lst</span></code>はイタラブルであるリストを想定している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>: <code class="docutils literal notranslate"><span class="pre">lst</span></code>の要素数を<code class="docutils literal notranslate"><span class="pre">n</span></code>に割り当てる。<code class="docutils literal notranslate"><span class="pre">n</span></code>は<code class="docutils literal notranslate"><span class="pre">#3</span></code>と<code class="docutils literal notranslate"><span class="pre">#4</span></code>で使うことになる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>: 上の説明にある「外側ループ」に対応している。合計で<code class="docutils literal notranslate"><span class="pre">n-1</span></code>回のループ計算をおこない，<code class="docutils literal notranslate"><span class="pre">lst</span></code>の全ての要素インデックスに対応している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>: 上の説明にある「内側ループ」に対応している。<code class="docutils literal notranslate"><span class="pre">range(n-1,</span> <span class="pre">i,</span> <span class="pre">-1)</span></code>は<code class="docutils literal notranslate"><span class="pre">i+1</span></code>から<code class="docutils literal notranslate"><span class="pre">n-1</span></code>までの番号を逆順に並べている。例えば，<code class="docutils literal notranslate"><span class="pre">list(range(10,</span> <span class="pre">5,</span> <span class="pre">-1))</span></code>は<code class="docutils literal notranslate"><span class="pre">[10,9,8,7,6]</span></code>を返す。これは<code class="docutils literal notranslate"><span class="pre">#5</span></code>と<code class="docutils literal notranslate"><span class="pre">#6</span></code>に置いて最後の要素から始まってから<code class="docutils literal notranslate"><span class="pre">i+1</span></code>番目の要素までを順に考える必要があるため。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>〜<code class="docutils literal notranslate"><span class="pre">#6</span></code>: <code class="docutils literal notranslate"><span class="pre">lst[j-1]&gt;lst[j]</span></code>とは左の要素が右の要素より大きい場合に<code class="docutils literal notranslate"><span class="pre">True</span></code>を返し，その場合，<code class="docutils literal notranslate"><span class="pre">#6</span></code>では左右の要素を入れ替えている。<code class="docutils literal notranslate"><span class="pre">#6</span></code>は上の説明の２つの要素の入れ替えに対応している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#7</span></code>: 外側ループが終わった後，<code class="docutils literal notranslate"><span class="pre">lst</span></code>を返す。</p></li>
</ul>
<p>コードを実行し，最初の<code class="docutils literal notranslate"><span class="pre">10</span></code>の要素を表示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">bubble_sort</span><span class="p">(</span><span class="n">lst4</span><span class="p">)</span>
<span class="n">res</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 2, 2, 4, 5, 6, 6, 9, 9]
</pre></div>
</div>
</div>
</div>
<p>最後の<code class="docutils literal notranslate"><span class="pre">10</span></code>の要素を表示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="p">[</span><span class="mi">990</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[990, 990, 993, 997, 997, 999, 999, 1000, 1000, 1000]
</pre></div>
</div>
</div>
</div>
</section>
<section id="id19">
<h4>実行スピード比較<a class="headerlink" href="#id19" title="Permalink to this heading">#</a></h4>
<p>それぞれの実行スピードを比較してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> insertion_sort(lst4)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>51.7 ms ± 602 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> bubble_sort(lst4)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>59 ms ± 462 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre></div>
</div>
</div>
</div>
<p>スピードの違いの一つの要因は「値の入れ替え」の回数の差である。
<code class="docutils literal notranslate"><span class="pre">insertion_sort()</span></code>の場合，<code class="docutils literal notranslate"><span class="pre">#8</span></code>で値の入れ替えがおこなわれており，最大で<span class="math notranslate nohighlight">\(n-1\)</span>回となる。
一方，<code class="docutils literal notranslate"><span class="pre">bubble_sort()</span></code>の値の入れ替えは<code class="docutils literal notranslate"><span class="pre">#6</span></code>でおこなわれており，最大で<span class="math notranslate nohighlight">\(n^2/2\)</span>回となる。
<span class="math notranslate nohighlight">\(n&gt;2\)</span>の場合，<span class="math notranslate nohighlight">\(n^2/2&gt;n-1\)</span>となるため，実行時間の差に現れていると考えられる。</p>
<p>最後に組み込み関数<code class="docutils literal notranslate"><span class="pre">sorted()</span></code>と比較してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> sorted(lst4)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7.72 µs ± 480 ns per loop (mean ± std. dev. of 7 runs, 100,000 loops each)
</pre></div>
</div>
</div>
</div>
<p>平均の単位は<code class="docutils literal notranslate"><span class="pre">ms</span></code>ではなく<code class="docutils literal notranslate"><span class="pre">µs</span></code>となっている。やはり組み込み関数は速い！</p>
</section>
</section>
</section>
<section id="id20">
<h2>疑似コード<a class="headerlink" href="#id20" title="Permalink to this heading">#</a></h2>
<p>前節では簡単なアルゴリズムを<code class="docutils literal notranslate"><span class="pre">Python</span></code>コードとして表し実行したが，その裏にある考え方は他のコンピューター言語でも使うことができる。更に言うと，アルゴリズムを図や言葉で表すことも可能である。<a class="reference external" href="https://www.google.co.jp/search?q=%E3%83%95%E3%83%AD%E3%83%BC%E3%83%81%E3%83%A3%E3%83%BC%E3%83%88%E3%80%80%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0">フローチャート</a>と呼ばれるのがその一つであり，図を使いアルゴリズムの考えを表現している。そしてもう１つが疑似コードと言われるものであり，自然言語（日本語や英語）で書かれたコードのことである。この２つの手法の利点は，コンピューター言語で発生するエラーを気にせずに，アルゴリズムの考えを理解・整理し，より良い（速い）ものを作り出すことができる土壌となり得ることだろう。以下では疑似コードに基づいてコードの書き方を検討する。</p>
<p>上でも説明したが，疑似コードとは，自然言語（日本語や英語）で書かれたコードであるため，<code class="docutils literal notranslate"><span class="pre">Python</span></code>は実行できない箇条書きのような文章となっている。レポートを書く際に，まずアウトラインを考えて書き出す人もいると思うが，それをイメージすれば良いだろう。次の点が重要となる。</p>
<ul class="simple">
<li><p>明確さ</p></li>
<li><p>簡潔さ</p></li>
<li><p>細かい詳細は省く</p>
<ul>
<li><p>アルゴリズムの核となる部分を捉える</p></li>
</ul>
</li>
<li><p>高い可読性</p>
<ul>
<li><p>コードを理解できる人ならで誰が読んでも手順が分かるもの</p></li>
</ul>
</li>
</ul>
<p>一方で，疑似コードの決まった書き方はない。通常は人それぞれ自分のスタイルや好みに合わせて書いているのが実状である（出版のための共通のスタイルがある場合もある）。ここでは次のスタイルとする。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Python</span></code>コードと同じインデントを使う。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Python</span></code>コード（例えば，<code class="docutils literal notranslate"><span class="pre">for</span></code>や<code class="docutils literal notranslate"><span class="pre">while</span></code>）を使えればそのまま使う。</p>
<ul>
<li><p>疑似コードを英語で書く場合，英語での記述と区別するために大文字を多用するが，日本語とは区別し易いので小文字を使う。</p></li>
</ul>
</li>
</ul>
<p>これら以外は，箇条書きスタイルとしよう。</p>
<section id="fizzbuzz">
<h3><code class="docutils literal notranslate"><span class="pre">FizzBuzz</span></code>問題<a class="headerlink" href="#fizzbuzz" title="Permalink to this heading">#</a></h3>
<p>まず例として有名な<code class="docutils literal notranslate"><span class="pre">FizzBuzz</span></code>問題を考えよう。</p>
<blockquote>
<div><p>1から100までの数字を表示する。ただし，</p>
<ul class="simple">
<li><p>3の倍数は数字の代わりに<code class="docutils literal notranslate"><span class="pre">Fizz</span></code>と表示し，</p></li>
<li><p>5の倍数は数字の代わりに<code class="docutils literal notranslate"><span class="pre">Buzz</span></code>と表示し，</p></li>
<li><p>3と5の倍数は数字の代わりに<code class="docutils literal notranslate"><span class="pre">FizzBuzz</span></code>と表示する。</p></li>
</ul>
</div></blockquote>
<p>次のコードでは<code class="docutils literal notranslate"><span class="pre">fizzbuzz</span></code>関数として書いている。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fizzbuzz</span><span class="p">():</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;FizzBuzz&#39;</span><span class="p">)</span>
            
        <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fizz&#39;</span><span class="p">)</span>
            
        <span class="k">elif</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Buzz&#39;</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>ここで<code class="docutils literal notranslate"><span class="pre">%</span></code>は除算の余りを返す演算子である。実行してみよう。</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fizzbuzz</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
2
Fizz
4
Buzz
Fizz
7
8
Fizz
Buzz
11
Fizz
13
14
FizzBuzz
16
17
Fizz
19
Buzz
Fizz
22
23
Fizz
Buzz
26
Fizz
28
29
FizzBuzz
31
32
Fizz
34
Buzz
Fizz
37
38
Fizz
Buzz
41
Fizz
43
44
FizzBuzz
46
47
Fizz
49
Buzz
Fizz
52
53
Fizz
Buzz
56
Fizz
58
59
FizzBuzz
61
62
Fizz
64
Buzz
Fizz
67
68
Fizz
Buzz
71
Fizz
73
74
FizzBuzz
76
77
Fizz
79
Buzz
Fizz
82
83
Fizz
Buzz
86
Fizz
88
89
FizzBuzz
91
92
Fizz
94
Buzz
Fizz
97
98
Fizz
Buzz
</pre></div>
</div>
</div>
</div>
<p>これを疑似コードで表してみよう。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def フィズバズ（）

    forループ i &lt;-- 1から100まで
    
        if i を3で割ると余り0 and i を5で割ると余り0
            &quot;FizzBuzz&quot;を表示
            
        elif i を3で割ると余り0
            &quot;Fizz&quot;を表示
            
        elif i を5で割ると余り0
            &quot;Buzz&quot;を表示           
            
        else
            i を表示
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Python</span></code>コードと疑似コードを比べて，疑似コードがどのようなものかイメージできたのではないだろうか。上にも書いたが，疑似コードの目的はアルゴリズムを表現することであり，<code class="docutils literal notranslate"><span class="pre">FizzBuzz</span></code>の例はその目的を達成している。もちろん，これこそが「正しい」という疑似コードはないので，自分なりに書き替えてみてはどうだろうか。ただ，ここでの目的は質の高い疑似コードを書くことでは<strong>ない</strong>。</p>
<p>疑似コードには次の利点がある。</p>
<blockquote>
<div><p>プログラミング言語の構文について特に注意を払わずに（エラーを心配せずに），コードの内容を計画・検討することを可能にする。</p>
</div></blockquote>
<p>この特性を活かして，コードの書き方を検討しようというのがここでの目的である。言い換えると，漠然とした曖昧な疑似コードを<strong>修正する過程</strong>を通して，アルゴリズムを<code class="docutils literal notranslate"><span class="pre">Python</span></code>コードに落とし込むことを考える。５つの例を使うが，疑似コードの修正プロセスがコードを書く上でのヒントになるのではないかと期待している。</p>
</section>
<section id="id21">
<h3>リストの合計（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）<a class="headerlink" href="#id21" title="Permalink to this heading">#</a></h3>
<p>ここでの目的：</p>
<blockquote>
<div><p>リスト（タプル）の要素の合計を返す関数を作成する。ただし<code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使うこと。</p>
</div></blockquote>
<hr class="docutils" />
<p>＜Ver. 1＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">合計</span><span class="p">(</span><span class="n">リスト</span><span class="p">)</span>

    <span class="n">最初の要素から最後の要素を全て足し合わせる</span> <span class="c1">#1</span>
    
    <span class="n">その合計を返す</span>
</pre></div>
</div>
<ul class="simple">
<li><p>全体像はイメージできるが，<code class="docutils literal notranslate"><span class="pre">#1</span></code>で要素をどう足し合わせるか不明。要素ごとに何をするかを書き表そう。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 2＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 合計(リスト)

    # リストの要素数：N+1

    0番目の要素に1番目の要素を加える
    それに2番目の要素を加える。      #1
    それに3番目の要素を加える。      #1
    ・・・・・
    それにN番目の要素を加える。      #1
    
    return その合計
</pre></div>
</div>
<ul class="simple">
<li><p>具体性が芽生えてきたが，まだコードに落とせない。特に，<code class="docutils literal notranslate"><span class="pre">#1</span></code>にある「それに」をどう扱うかを考えよう。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 3＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 合計(リスト)

    # リストの要素数：N+1

    0番目の要素に1番目の要素を加えて，合計をxとする。 #1
    xに2番目の要素を加えて，それをxとする。      　 #1
    xに3番目の要素を加えて，それをxとする。       　#1
    ・・・・・
    xにN番目の要素を加えて，それをxとする。      　　#1
    
    return x
</pre></div>
</div>
<ul class="simple">
<li><p>より具体的になってきたが，<code class="docutils literal notranslate"><span class="pre">#1</span></code>の<code class="docutils literal notranslate"><span class="pre">x</span></code>をどう扱うかを考える必要がある。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 4＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 合計(リスト)

    # リストの要素数：N+1

    x = 0
    
    xに0番目の要素の値を足す #1
    xに1番目の要素の値を足す #1
    xに2番目の要素の値を足す #1
    ・・・・・
    xにN番目の要素の値を足す #1
    
    return x
</pre></div>
</div>
<ul class="simple">
<li><p>骨格ができてきた。<code class="docutils literal notranslate"><span class="pre">#1</span></code>で似た作業がリピートされているのでループを使おう。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 5＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">合計</span><span class="p">(</span><span class="n">リスト</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="n">forループ</span>　<span class="n">i</span> <span class="o">&lt;--</span> <span class="mi">0</span><span class="n">からNまで</span>  <span class="c1">#1</span>
        <span class="n">i番目の要素の値をxに足す</span>  <span class="c1">#1</span>
        
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>の<code class="docutils literal notranslate"><span class="pre">i</span></code>はリストのインデックス番号になっているが，要素自体で良いのでは？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 6＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">合計</span><span class="p">(</span><span class="n">リスト</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">for</span> <span class="n">v</span> <span class="o">&lt;--</span> <span class="n">リスト</span>
        <span class="n">要素vをxに足す</span>
        
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ここまで来るとゴールは目の前‼️</p></li>
</ul>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sum_for_loop</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="n">i</span>
    
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<p>実行してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_for_loop</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">sum_for_loop</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(6, 4950)
</pre></div>
</div>
</div>
</div>
</section>
<section id="id22">
<h3>リストの合計（<code class="docutils literal notranslate"><span class="pre">while</span></code>ループ）<a class="headerlink" href="#id22" title="Permalink to this heading">#</a></h3>
<p>ここでの目的：</p>
<blockquote>
<div><p>リスト（タプル）の要素の合計を返す関数を作成する。ただし<code class="docutils literal notranslate"><span class="pre">while</span></code>ループを使うこと。</p>
</div></blockquote>
<p>リストの合計（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）の＜Ver. 4＞まで同じ。</p>
<hr class="docutils" />
<p>＜Ver. 4＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 合計(リスト)

    # リストの要素数：N+1

    x = 0
    
    xに0番目の要素の値を足す #1
    xに1番目の要素の値を足す #1
    xに2番目の要素の値を足す #1
    ・・・・・
    xにN番目の要素の値を足す #1
    
    return x
</pre></div>
</div>
<ul class="simple">
<li><p>骨格ができてきた。<code class="docutils literal notranslate"><span class="pre">#1</span></code>で似た作業がリピートされているのでループを使おう。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 5＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">合計</span><span class="p">(</span><span class="n">リスト</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>                    <span class="c1">#1</span>
    
    <span class="k">while</span> <span class="n">条件</span>                <span class="c1">#2</span>
        <span class="n">i番目の要素の値をxに足す</span>   <span class="c1">#3</span>

    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>の条件は何にするのか。</p></li>
<li><p>無限ループに入らないように<code class="docutils literal notranslate"><span class="pre">#1</span></code>と<code class="docutils literal notranslate"><span class="pre">#3</span></code>に付け加えることはないか。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 6＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">合計</span><span class="p">(</span><span class="n">リスト</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>                  <span class="c1">#1</span>
    
    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">リストの要素数</span>  <span class="c1">#2</span>
        <span class="n">i番目の要素の値をxに足す</span>    <span class="c1">#3</span>
        <span class="n">countを1増やす</span>           <span class="c1">#4</span>

    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>の<code class="docutils literal notranslate"><span class="pre">i</span></code>と<code class="docutils literal notranslate"><span class="pre">#1</span></code>，<code class="docutils literal notranslate"><span class="pre">#2</span></code>，<code class="docutils literal notranslate"><span class="pre">#4</span></code>の<code class="docutils literal notranslate"><span class="pre">count</span></code>はどう関係しているのか？同じ？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 7＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">合計</span><span class="p">(</span><span class="n">リスト</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">リストの要素数</span>
        <span class="n">count番目の要素の値をxに足す</span>
        <span class="n">countを1増やす</span>

    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ここまで来るとゴールは目の前‼️</p></li>
</ul>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sum_while_loop</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="n">lst</span><span class="p">[</span><span class="n">count</span><span class="p">]</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<p>関数を実行しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sum_while_loop</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">sum_while_loop</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(6, 4950)
</pre></div>
</div>
</div>
</div>
</section>
<section id="id23">
<h3>コイントス（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）<a class="headerlink" href="#id23" title="Permalink to this heading">#</a></h3>
<p>ここでの目的：</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">n</span></code>回コイントスし，表と裏の回数を表示する関数を作成する。ただし<code class="docutils literal notranslate"><span class="pre">random.randint()</span></code>と<code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使うこと。</p>
</div></blockquote>
<hr class="docutils" />
<p>＜Ver. 1＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def コイントス(n)
   
    0回目のコイントス　→　表・裏  #1
    1回目のコイントス　→　表・裏  #1
    2回目のコイントス　→　表・裏  #1
    ・・・
    n-1回目のコイントス　→　表・裏   #1
   
    表の合計を計算  #2
    裏の合計を計算  #2
    
    表の合計と裏の合計を返す
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>で表と裏をどう表す？</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>の合計の計算はどうする？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 2＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def コイントス(n)
    
    # 表：1
    # 裏：0
   
    0回目のコイントス　→　random.randint(0,1)   #1
    1回目のコイントス　→　random.randint(0,1)   #1
    2回目のコイントス　→　random.randint(0,1)   #1
    ・・・
    n-1回目のコイントス　→　random.randint(0,1) #1
   
    表の合計を計算  #2
    裏の合計を計算  #2
    
    表の合計と裏の合計を返す
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>は似たコードになるのでループを使おう。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>の合計の計算はどうする？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 3＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">コイントス</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    
    <span class="c1"># 表：1</span>
    <span class="c1"># 裏：0</span>
   
    <span class="k">for</span> <span class="n">ループ</span>
        <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#1</span>
   
    <span class="n">表の合計を計算</span>  <span class="c1">#2</span>
    <span class="n">裏の合計を計算</span>  <span class="c1">#2</span>
    
    <span class="n">表の合計と裏の合計を返す</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>が実行されるたびに<code class="docutils literal notranslate"><span class="pre">0</span></code>又は<code class="docutils literal notranslate"><span class="pre">1</span></code>が出るが，記録されていない。記録する変数を導入する必要がある。</p></li>
<li><p>その記録を使って<code class="docutils literal notranslate"><span class="pre">#2</span></code>の合計の計算できる。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 4＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def コイントス(n)
    
    # 表：1
    # 裏：0
   
    heads = 0
    tails = 0
    
    for ループ                 #1
        random.randint(0,1)
        結果が１であれば，headsを１増やす
        結果が０であれば，tailsを１増やす
       
    return heads, tails
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>で使うイタラブルは何か？</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>で使うイタラブル用の変数は何か？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 5＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def コイントス(n)
    
    # 表：1
    # 裏：0
   
    heads = 0
    tails = 0
    
    for _ &lt;-- 0からn-1まで            #1
        random.randint(0,1)
        結果が１であれば，headsを１増やす  #2
        結果が０であれば，tailsを１増やす  #2
       
    return heads, tails
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>で<code class="docutils literal notranslate"><span class="pre">_</span></code>を使っている理由：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code>や<code class="docutils literal notranslate"><span class="pre">j</span></code>などでも良いが，<code class="docutils literal notranslate"><span class="pre">for</span></code>ループの「本体」で使われていない変数には<code class="docutils literal notranslate"><span class="pre">_</span></code>が使われることがよくある。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>を<code class="docutils literal notranslate"><span class="pre">if</span></code>文に書き換える必要がある。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 6＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">コイントス</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    
    <span class="c1"># 表：1</span>
    <span class="c1"># 裏：0</span>
   
    <span class="n">heads</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">tails</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">for</span> <span class="n">_</span> <span class="o">&lt;--</span> <span class="mi">0</span><span class="n">からn</span><span class="o">-</span><span class="mi">1</span><span class="n">まで</span>
    
        <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="n">の結果をresultに割り当てる</span>
        
        <span class="k">if</span> <span class="n">resultが１</span>
            <span class="n">headsを１増やす</span>
        
        <span class="k">else</span>
            <span class="n">tailsを１増やす</span>
       
    <span class="k">return</span> <span class="n">heads</span><span class="p">,</span> <span class="n">tails</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ここまで来ればゴールは目の前‼️</p></li>
</ul>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">coin_toss_for_loop</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    
    <span class="n">heads</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">tails</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">heads</span> <span class="o">+=</span> <span class="mi">1</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tails</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">heads</span><span class="p">,</span> <span class="n">tails</span>
</pre></div>
</div>
</div>
</div>
<p>実行しよう</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coin_toss_for_loop</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(48, 52)
</pre></div>
</div>
</div>
</div>
</section>
<section id="id24">
<h3>コイントス（<code class="docutils literal notranslate"><span class="pre">while</span></code>ループ）<a class="headerlink" href="#id24" title="Permalink to this heading">#</a></h3>
<p>ここでの目的：</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">n</span></code>回コイントスし，表と裏の回数を表示する関数を作成する。ただし<code class="docutils literal notranslate"><span class="pre">random.randint()</span></code>と<code class="docutils literal notranslate"><span class="pre">while</span></code>ループを使うこと。</p>
</div></blockquote>
<p>コイントス（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）の＜Ver. 2＞まで同じ。</p>
<hr class="docutils" />
<p>＜Ver. 2＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def コイントス(n)
    
    # 表：1
    # 裏：0
   
    0回目のコイントス　→　random.randint(0,1)   #1
    1回目のコイントス　→　random.randint(0,1)   #1
    2回目のコイントス　→　random.randint(0,1)   #1
    ・・・
    n-1回目のコイントス　→　random.randint(0,1) #1
   
    表の合計を計算  #2
    裏の合計を計算  #2
    
    表の合計と裏の合計を返す
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>は似たコードになるのでループを使おう。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>の合計の計算はどうする？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 3＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">コイントス</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    
    <span class="c1"># 表：1</span>
    <span class="c1"># 裏：0</span>
   
    <span class="k">while</span> <span class="n">ループ</span>
        <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  <span class="c1">#1</span>
   
    <span class="n">表の合計を計算</span>  <span class="c1">#2</span>
    <span class="n">裏の合計を計算</span>  <span class="c1">#2</span>
    
    <span class="n">表の合計と裏の合計を返す</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>で結果を記録する必要がある。</p></li>
<li><p>その記録を使って<code class="docutils literal notranslate"><span class="pre">#2</span></code>の合計の計算できる。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 4＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def コイントス(n)
    
    # 表：1
    # 裏：0
    
    heads = 0
    tails = 0        #1
   
    while 条件　　     #2
    
        random.randint(0,1)
        結果が１であれば，headsを１増やす
        結果が０であれば，tailsを１増やす  #3
       
    return heads, tails
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>の条件は何にするのか。</p></li>
<li><p>無限ループに入らないように<code class="docutils literal notranslate"><span class="pre">#1</span></code>と<code class="docutils literal notranslate"><span class="pre">#3</span></code>に何を付け加える必要があるか。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 5＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def コイントス(n)
    
    heads = 0
    tails = 0
    count = 0

    while count &lt; n
    
        random.randint(0,1)
        結果が１であれば，headsを１増やす  #1
        結果が０であれば，tailsを１増やす  #1
        countを1増やす
       
    return heads, tails
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>を<code class="docutils literal notranslate"><span class="pre">if</span></code>文として書く。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 6＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">コイントス</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    
    <span class="n">heads</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">tails</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">n</span>
    
        <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="n">の結果をresultに割り当てる</span>
        
        <span class="k">if</span> <span class="n">resultが１</span>
            <span class="n">headsを１増やす</span>
        
        <span class="k">else</span>
            <span class="n">tailsを１増やす</span>
            
        <span class="n">countを1増やす</span>
       
    <span class="k">return</span> <span class="n">heads</span><span class="p">,</span> <span class="n">tails</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ここまで来ればゴールは目の前‼️</p></li>
</ul>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">coin_toss_while_loop</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    
    <span class="n">heads</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">tails</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">heads</span> <span class="o">+=</span> <span class="mi">1</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tails</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    
    <span class="k">return</span> <span class="n">heads</span><span class="p">,</span> <span class="n">tails</span>
</pre></div>
</div>
</div>
</div>
<p>コードを実行しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coin_toss_while_loop</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(58, 42)
</pre></div>
</div>
</div>
</div>
</section>
<section id="id25">
<h3>リストの最大値<a class="headerlink" href="#id25" title="Permalink to this heading">#</a></h3>
<p>ここでの目的：</p>
<blockquote>
<div><p>リスト（又はタプル）を引数とし，含まれる要素の中から最大値を返す関数を作成する。</p>
</div></blockquote>
<hr class="docutils" />
<p>＜Ver. 1＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト）:

    0番目からN番目の要素を比較して最大値を探す  #1
    
    最大値を返す
</pre></div>
</div>
<ul class="simple">
<li><p>ぼやっとした全体像となっているのは否めない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>の「比較」をどうするかが重要となる。。:</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 2＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:
    
    # N = リストの要素数
    
    &lt;0&gt; l[0]をl[1]〜l[N]と比較し，
        l[0]が全てに対して大きければ，l[0]が最大値。
        そうでなければ&lt;1&gt;に進む。
    &lt;1&gt; l[1]をl[2]〜l[N]と比較し，
        l[2]が全てに対して大きければ，l[2]が最大値。
        そうでなければ&lt;2&gt;に進む。
    &lt;2&gt; l[2]をl[3]〜l[N]と比較し，
        l[3]が全てに対して大きければ，l[3]が最大値。
        そうでなければ&lt;3&gt;に進む。
    ・・・・・
    &lt;N-1&gt; l[N-1]をl[N]と比較し，
          l[N-1]大きければ，l[N-1]が最大値。
          そうでなければl[N]が最大値。
  
    最大値を返す
</pre></div>
</div>
<p>良さそうにも見えるが，問題がある。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;0&gt;</span></code>では<code class="docutils literal notranslate"><span class="pre">N</span></code>回の比較をおこなう。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code>では<code class="docutils literal notranslate"><span class="pre">N-1</span></code>回の比較をおこなう。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;2&gt;</span></code>では<code class="docutils literal notranslate"><span class="pre">N-2</span></code>回の比較をおこなう。</p></li>
<li><p>・・・・</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;N&gt;</span></code>では<code class="docutils literal notranslate"><span class="pre">1</span></code>回の比較をおこなう。</p></li>
<li><p>比較する回数の合計は<code class="docutils literal notranslate"><span class="pre">1+2+3+・・・+N=N(N+1)/2</span></code>。比較回数が非常に多い。もっと良い方法があるのでは？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 3＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    # N = リストの要素数
    
    l[0]とl[1]を比較し，大きい方を残す    #1
    l[1]とl[2]を比較し，大きい方を残す    #1
    l[2]とl[3]を比較し，大きい方を残す    #1
    ・・・
    l[N-1]とl[N]を比較し，大きい方を残す  #1
    
    最大値を返す
</pre></div>
</div>
<ul class="simple">
<li><p>比較する回数は<code class="docutils literal notranslate"><span class="pre">N</span></code>回で＜Ver. 2＞より少ない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>の「大きい方を残す」はどうする？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 4＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    # N = リストの要素数

    max_ = -1_000_000        #1
    
    l[0]とl[1]を比較し，大きい方をmax_に割り当てる。   #2
    l[1]とl[2]を比較し，大きい方をmax_に割り当てる。   #2
    l[2]とl[3]を比較し，大きい方をmax_に割り当てる。   #2
    ・・・
    l[N-1]とl[N]を比較し，大きい方をxに割り当てる。 #2
    
    return max_
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>だけを見ると最大値は求められそう。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>では最大値が<code class="docutils literal notranslate"><span class="pre">-1_000_000</span></code>未満の場合をカバーできない。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 5＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    # N = リストの要素数
    
    max_ = l[0]
    
    max_とl[1]を比較し，大きい方をmax_に割り当てる。  #1
    max_とl[2]を比較し，大きい方をmax_に割り当てる。  #1
    max_とl[3]を比較し，大きい方をmax_に割り当てる。  #1
    ・・・
    max_とl[N]を比較し，大きい方をmax_に割り当てる。  #1
    
    return max_
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>は似たようなコードになるのでループを使おう。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 5＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    # N = リストの要素数
    
    max_ = l[0]
    
    for ループ
        max_とl[i]を比較し，大きい方をmax_に割り当てる。 #1
    
    return max_
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>は条件分岐させる必要がある。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 6＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    # N = リストの要素数
    
    max_ = l[0]
    
    for ループ     #1
        max_ &lt; l[i]の場合は，l[i]をxに割り当てる。
        max_ &gt;= l[i]の場合は，pass
    
    return max_
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>のイタラブルは何にする？</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>のイタラブル用の変数は何にする？</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 7＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    # N = リストの要素数
    
    max_ = l[0]
    
    for i &lt;-- 0から(lの要素数-1)まで                #1
        max_ &lt; l[i]の場合は，l[i]をmax_に割り当てる。 #1
        max_ &gt;= l[i]の場合は，pass                #1
    
    return max_
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>の<code class="docutils literal notranslate"><span class="pre">i</span></code>はリストのインデックス番号だが，直接要素自体を使う方が<code class="docutils literal notranslate"><span class="pre">Python</span></code>的である。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 8＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    # N = リストの要素数
    
    max_ = l[0]
    
    for v &lt;-- リスト
        max_ &lt; vの場合は，vをxに割り当てる。 #1
        max_ &gt;= vの場合は，pass          #1
    
    return max_
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>は<code class="docutils literal notranslate"><span class="pre">if</span></code>文に書き換える。</p></li>
</ul>
<hr class="docutils" />
<p>＜Ver. 9＞</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>def 最大値を求める（リスト=l）:

    max_ = l[0]
    
    for v &lt;-- リスト
    
        if max_ &lt; v
            max_にvを割り当てる。
        else
            pass
    
    return max_
</pre></div>
</div>
<ul class="simple">
<li><p>後は<code class="docutils literal notranslate"><span class="pre">Python</span></code>コードを書くだけ‼️</p></li>
</ul>
<hr class="docutils" />
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_max</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    
    <span class="n">max_</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="n">max_</span><span class="p">:</span>
            <span class="n">max_</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>         <span class="c1"># 省略可</span>
            <span class="k">pass</span>      <span class="c1"># 省略可</span>
    
    <span class="k">return</span> <span class="n">max_</span>
</pre></div>
</div>
</div>
</div>
<p>実行してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)]</span>

<span class="n">search_max</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.946673054792052
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>＜Ver. 2＞をコードで書くと次の様になる。上のコードと比べると実行時間が1000倍近く長くなる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_max</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
    
    <span class="n">max_</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="c1"># 最後の要素はカバーしていない</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">l</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
        
        <span class="n">temp</span> <span class="o">=</span> <span class="n">max_</span>
        

        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">l</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">val</span>
        
        <span class="k">if</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="n">max_</span><span class="p">:</span>
            <span class="n">max_</span> <span class="o">=</span> <span class="n">temp</span>
    
    <span class="c1"># 最後の要素について</span>
    <span class="k">if</span> <span class="n">max_</span> <span class="o">&lt;</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">max_</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">max_</span>
</pre></div>
</div>
</div>
</section>
<section id="id26">
<h3>最後に<a class="headerlink" href="#id26" title="Permalink to this heading">#</a></h3>
<p>コードを書くことに慣れてくると，簡単なコードに疑似コードの修正プロセスは必要なくなるだろう。しかし，その段階になればより複雑なコードを書くことになるはずだ。その時には疑似コードが役に立つのではないかと思われる。少し頭をひねるような問題であれば，疑似コードを試してみるのも一案である。</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="1_Basics_IV.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">制御フロー</p>
      </div>
    </a>
    <a class="right-next"
       href="1_Basics_VI.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">図示とシミュレーション</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">モジュールとパッケージ</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">説明</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#math"><code class="docutils literal notranslate"><span class="pre">math</span></code>モジュール</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random"><code class="docutils literal notranslate"><span class="pre">random</span></code>モジュール</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#see"><code class="docutils literal notranslate"><span class="pre">see</span></code>モジュール</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">アルゴリズム</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">例１：合計</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#for"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#while"><code class="docutils literal notranslate"><span class="pre">while</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">実行スピード比較</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">例２：値の探索</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id9"><code class="docutils literal notranslate"><span class="pre">while</span></code>ループ</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">番兵法</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">組み込み関数</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">例３：最小値の探索</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">直接的な探索</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">間接的な探索</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">実行スピード比較</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">例４：ソート</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">単純選択ソート</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">バブル・ソート</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">実行スピード比較</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">疑似コード</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fizzbuzz"><code class="docutils literal notranslate"><span class="pre">FizzBuzz</span></code>問題</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">リストの合計（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">リストの合計（<code class="docutils literal notranslate"><span class="pre">while</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">コイントス（<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">コイントス（<code class="docutils literal notranslate"><span class="pre">while</span></code>ループ）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">リストの最大値</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">最後に</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 春山 鉄源  Tetsugen HARUYAMA
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <!-- Default Statcounter code for Py4Basics https://py4basics.github.io --> <script type="text/javascript"> var sc_project=12615270; var sc_invisible=1; var sc_security="2a7796f0"; </script> <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script> <noscript><div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/12615270/0/2a7796f0/1/" alt="Web Analytics" referrerPolicy="no-referrer-when-downgrade"></a></div></noscript> <!-- End of Statcounter Code -->
</div>
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
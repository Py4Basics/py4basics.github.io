
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>NumPy：高速化 &#8212; 経済学のためのPython入門</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/myadmonitions.css?v=372cf325" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-R9KXY9G892"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-R9KXY9G892');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-R9KXY9G892');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '2_NumPy';</script>
    <link rel="canonical" href="https://py4basics.github.io/2_NumPy.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pandas：データ分析" href="3_Pandas.html" />
    <link rel="prev" title="図示とシミュレーション" href="1_Basics_VI.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">経済学のためのPython入門</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Python入門I</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="1_Basics_I.html">基本データ型と変数</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_II.html">データの操作</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_III.html">関数とメソッド</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_IV.html">制御フロー</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_V.html">モジュール、エラーとアルゴリズム</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_Basics_VI.html">図示とシミュレーション</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python入門II</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">NumPy</span></code>：高速化</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_Pandas.html"><code class="docutils literal notranslate"><span class="pre">Pandas</span></code>：データ分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_matplotlib.html"><code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code>：図示</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_pandas_plot.html"><code class="docutils literal notranslate"><span class="pre">Pandas</span></code>：図示</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_SciPy_optimize.html"><code class="docutils literal notranslate"><span class="pre">SciPy.optimize</span></code>：解の求め方と最適化問題</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_NumPy_random.html"><code class="docutils literal notranslate"><span class="pre">Numpy</span></code>: ランダム変数</a></li>
<li class="toctree-l1"><a class="reference external" href="https://py4etrics.github.io/5_SciPy_stats.html">SciPy.stats：確率分布</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">参考</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="0_Preparations.html">ツールのインストールと説明</a></li>
<li class="toctree-l1"><a class="reference internal" href="things_to_note.html">Tipsと注意点</a></li>
<li class="toctree-l1"><a class="reference internal" href="pseudo_code.html">疑似コード</a></li>
<li class="toctree-l1"><a class="reference internal" href="Grade.html">学業成績の分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Gapminder.html">Gapminder</a></li>
<li class="toctree-l1"><a class="reference internal" href="Moving_Average.html">移動平均</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">経済学</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://py4macro.github.io">Pythonで学ぶマクロ経済学（中級＋レベル）</a></li>
<li class="toctree-l1"><a class="reference external" href="https://py4etrics.github.io">Pythonで学ぶ入門計量経済学</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">JupyterLite</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://py4class.netlify.app">JupyterLiteを始める</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/Py4Basics/py4basics.github.io/source?urlpath=tree/2_NumPy.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/Py4Basics/py4basics.github.io/blob/source/2_NumPy.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>



<a href="https://github.com/Py4Basics/py4basics.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/2_NumPy.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>NumPy：高速化</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#array"><code class="docutils literal notranslate"><span class="pre">array</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">１次元配列</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">要素の抽出</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">要素の代入と削除</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">２次元配列：要素の抽出</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5"><code class="docutils literal notranslate"><span class="pre">array</span></code>を使った計算</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">加算</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">減算</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">スカラー乗算</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">乗算：バージョン１</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">乗算：バージョン２</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">転置</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linalg"><code class="docutils literal notranslate"><span class="pre">linalg</span></code>サブパッケージ</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sec-2-simultaneouseq">連立一次方程式の解</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#solve"><code class="docutils literal notranslate"><span class="pre">solve</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inv"><code class="docutils literal notranslate"><span class="pre">inv</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eigvals">固有値：<code class="docutils literal notranslate"><span class="pre">eigvals</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">NumPy使用時によく使う属性とメソッド</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">よく使うNumPy関数</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">浮動小数点の比較</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">様々な<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>関数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">効用関数</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#array-vs-list"><code class="docutils literal notranslate"><span class="pre">array</span></code> vs <code class="docutils literal notranslate"><span class="pre">list</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">マクロ経済学を考える</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">ケインズの45度線モデル</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-2">IS曲線の導出：２つの方程式を使う</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#for-1"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使う：方法１</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#for-2"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使う：方法２</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-1">IS曲線の導出：１つの方程式を使う</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is">IS曲線の導出：ベクトル演算を使う</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="numpy">
<span id="chap-numpy"></span><h1><code class="docutils literal notranslate"><span class="pre">NumPy</span></code>：高速化<a class="headerlink" href="#numpy" title="Link to this heading">#</a></h1>
<div name="html-admonition" style="font-size: 0.8em">
<input type="button" onclick="location.href='https://translate.google.com/translate?hl=&sl=ja&tl=en&u='+window.location;" value="Google translation" style="color:#ffffff;background-color:#008080; height:25px" onmouseover="this.style.background='#99ccff'" onmouseout="this.style.background='#008080'"/> in English or the language of your choice.
</div><br><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">py4macro</span>

<span class="c1"># 警告メッセージを非表示</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>リストの用途は広く使いやすい。一方で、以下で説明する高速化のためのベクトル演算が使えない。それにより、コードが長くなり、比較的に実行速度が落ちることになる。それを補うのが<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>である。<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>は数値計算をする上で重要な役割を果たすパッケージであり，特に，行列計算に威力を発揮する。<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>は「ナンパイ」と読む。慣例として<code class="docutils literal notranslate"><span class="pre">np</span></code>としてインポートする。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<section id="array">
<h2><code class="docutils literal notranslate"><span class="pre">array</span></code><a class="headerlink" href="#array" title="Link to this heading">#</a></h2>
<p>基本となる関数が<code class="docutils literal notranslate"><span class="pre">np.array()</span></code>であり，次のコードでは１次元配列を作る。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([10, 20, 30, 40, 50])
</pre></div>
</div>
</div>
</div>
<p>次に２次元配列を作成しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">]])</span>
<span class="n">mat</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12],
       [13, 14, 15, 16]])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mat</span></code>は行列と解釈できる。データ型を確認してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;numpy.ndarray&#39;&gt;
&lt;class &#39;numpy.ndarray&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">arr</span></code>と<code class="docutils literal notranslate"><span class="pre">mat</span></code>は<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>の<code class="docutils literal notranslate"><span class="pre">ndarray</span></code>（<code class="docutils literal notranslate"><span class="pre">n</span></code>次元<code class="docutils literal notranslate"><span class="pre">array</span></code>）というデータ型（クラス）である。<code class="docutils literal notranslate"><span class="pre">[]</span></code>に囲まれた数字が並んでいてリストと似ているように感じるかも知れないが、処理速度が格段に早く、より簡単なコードで同じ処理ができるなど使い勝手が大きく向上することが<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>の大きな特徴となる。科学計算やデータ処理では欠かせないパッケージとなっている。</p>
<p>次のコードが示すように、リストから<code class="docutils literal notranslate"><span class="pre">ndarray</span></code>を作成することができる</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4, 5])
</pre></div>
</div>
</div>
</div>
<p>リストと見てくれはあまり変わらないが、乗用車をレースカーにチューンアップしたのと等しい。<code class="docutils literal notranslate"><span class="pre">2</span></code>次元<code class="docutils literal notranslate"><span class="pre">array</span></code>もリストから作ることができる。まず、入れ子になるリストを作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">l</span><span class="p">]</span>
<span class="n">lst</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1, 2, 3, 4, 5],
 [1, 2, 3, 4, 5],
 [1, 2, 3, 4, 5],
 [1, 2, 3, 4, 5],
 [1, 2, 3, 4, 5]]
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">np.array()</span></code>関数の引数に<code class="docutils literal notranslate"><span class="pre">lst</span></code>を使うと<code class="docutils literal notranslate"><span class="pre">array</span></code>を作成できる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">lst</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[1, 2, 3, 4, 5],
        [1, 2, 3, 4, 5],
        [1, 2, 3, 4, 5],
        [1, 2, 3, 4, 5],
        [1, 2, 3, 4, 5]]])
</pre></div>
</div>
</div>
</div>
<p>後述するが、<code class="docutils literal notranslate"><span class="pre">ndarray</span></code>をリストに変換するメソッドも用意されている。</p>
<p><code class="docutils literal notranslate"><span class="pre">array</span></code>について<a class="reference external" href="https://note.com/sayajewels/n/n95edaedb0fc5">このサイト</a>では図を使って説明しているので興味があるひとは参考にしてはどうだろうか。</p>
</section>
<section id="id1">
<h2>１次元配列<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<section id="id2">
<h3>要素の抽出<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>１次元配列の場合、リストと同じ方法で要素を抽出できる。即ち、<code class="docutils literal notranslate"><span class="pre">[]</span></code>と要素のインデックスを使う。<code class="docutils literal notranslate"><span class="pre">1</span></code>番目の要素を抽出してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20
</pre></div>
</div>
</div>
</div>
<p>また、要素を連続で抽出するスライシング（slicing）も使うことができる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([20, 30, 40])
</pre></div>
</div>
</div>
</div>
<p>リストの場合と同じ様に，<code class="docutils literal notranslate"><span class="pre">:</span></code>の左側が選択する最初の要素であり，<code class="docutils literal notranslate"><span class="pre">:</span></code>の右側が選択する最後の次の番号である（即ち，<code class="docutils literal notranslate"><span class="pre">:</span></code>の右側の番号の要素は含まれない。</p>
<p>一方で、リストとは異なり、インデックスをリストとして指定することにより、複数の要素を簡単に抽出するできる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([10, 20, 40])
</pre></div>
</div>
</div>
</div>
<p>これはリストにはない機能である。</p>
</section>
<section id="id3">
<h3>要素の代入と削除<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>上で作成したリスト<code class="docutils literal notranslate"><span class="pre">arr</span></code>をもう一度考えてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([10, 20, 30, 40, 50])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">30</span></code>を<code class="docutils literal notranslate"><span class="pre">3000</span></code>に入れ替えてみよう。リストや辞書と同じように<code class="docutils literal notranslate"><span class="pre">=</span></code>を使い値を代入する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3000</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([  10,   20, 3000,   40,   50])
</pre></div>
</div>
</div>
</div>
<p>これはリストと同じ方法である。しかし、要素の削除は異なり、<code class="docutils literal notranslate"><span class="pre">np.delete()</span></code>関数を使う。第一引数に<code class="docutils literal notranslate"><span class="pre">array</span></code>を，第二引数に削除したい要素のインデックスを指定する。例えば，<code class="docutils literal notranslate"><span class="pre">3000</span></code>を削除したいとしよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([10, 20, 40, 50])
</pre></div>
</div>
</div>
</div>
<p>ここでもう一度<code class="docutils literal notranslate"><span class="pre">arr</span></code>を表示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([  10,   20, 3000,   40,   50])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">3000</span></code>は残ったままである。<code class="docutils literal notranslate"><span class="pre">np.delete()</span></code>を実行すると，もし<code class="docutils literal notranslate"><span class="pre">3000</span></code>を削除するとどうなるかを示している。<code class="docutils literal notranslate"><span class="pre">arr</span></code>自体を変更したい場合は<code class="docutils literal notranslate"><span class="pre">=</span></code>を使って再割り当てをする必要がある。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([10, 20, 40, 50])
</pre></div>
</div>
</div>
</div>
<p>これは<code class="docutils literal notranslate"><span class="pre">np.delete()</span></code>特有なものではなく，他の関数（例えば，<code class="docutils literal notranslate"><span class="pre">np.log()</span></code>や<code class="docutils literal notranslate"><span class="pre">np.sqrt()</span></code>）も同じである。</p>
</section>
</section>
<section id="id4">
<h2>２次元配列：要素の抽出<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<p>第<span class="math notranslate nohighlight">\(i\)</span>行目の第<span class="math notranslate nohighlight">\(j\)</span>列目の要素にアクセスするためには<code class="docutils literal notranslate"><span class="pre">mat[i,j]</span></code>と書く。<code class="docutils literal notranslate"><span class="pre">[,]</span></code>の<code class="docutils literal notranslate"><span class="pre">,</span></code>を挟んで左が行を表し，右が列を示す。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">行のインデックス</span><span class="p">,</span><span class="n">列のインデックス</span><span class="p">]</span>
</pre></div>
</div>
<p>コードはキーストロークが少なく，簡単なものが良いと考えられている。一方で，<code class="docutils literal notranslate"><span class="pre">Python</span></code>は初心者に比較的簡単な言語だと言われるが，それでも関数・メソッドの数は膨大である。そのため初心者にとって関数の使い方やオプションの書き方を間違う可能性は小さくない。さらに，自分が書いたコードを数週間・数ヶ月後に読み直すと，何をしようとしているのか分からないという状況が生じることもある。従って，以下の点が非常に重要になる。</p>
<ul class="simple">
<li><p>間違いにくいコードの書き方を覚える。</p></li>
<li><p>高い可読性を意識したコードの書き方を覚える。</p></li>
</ul>
<p>このスタンスに基づいて以下のルールに従って説明する。</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[,]</span></code>内の<code class="docutils literal notranslate"><span class="pre">,</span></code>を省略可能な場合であっても省略しない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[,]</span></code>内の<code class="docutils literal notranslate"><span class="pre">,</span></code>の左または右を省略できる場合であっても省略しない。</p></li>
</ol>
<p>行または列を連続選択する（slicing）場合を考えよう。上でも説明したように<code class="docutils literal notranslate"><span class="pre">:</span></code>を使うが</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span><span class="p">:</span><span class="n">end</span>
</pre></div>
</div>
<p>となる。ここで<code class="docutils literal notranslate"><span class="pre">start</span></code>とは選択する要素の最初インデックスであり，<code class="docutils literal notranslate"><span class="pre">end</span></code>は選択する最後の要素の次のインデックスである（リストの場合と同じ）。このルールに従うと，</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:</span></code>の左を省略すると「最初から」という意味になる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:</span></code>の右を省略すると「最後まで」という意味になる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">,</span></code>の左または右が<code class="docutils literal notranslate"><span class="pre">:</span></code>のみの場合，「全て」という意味になる。</p></li>
</ul>
<p>これを読むだけでは分かりにくいと思うので，以下の例に目を通してもう一度この箇所の説明を読んむことを推奨する。</p>
<p><code class="docutils literal notranslate"><span class="pre">0</span></code>行目、<code class="docutils literal notranslate"><span class="pre">1</span></code>列目の要素を抽出するとしよう</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>第<span class="math notranslate nohighlight">\(i\)</span>行の抽出は<code class="docutils literal notranslate"><span class="pre">mat[i,:]</span></code>で可能である。<code class="docutils literal notranslate"><span class="pre">:</span></code>は「列の全て」という意味になる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r0</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span>
<span class="n">r0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4])
</pre></div>
</div>
</div>
</div>
<p>抽出した行は上で説明した１次元配列なのでインデックスやスライシングを使って要素にアクセスすることができる。</p>
<p>複数の行の抽出は次の方法で可能である。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 5,  6,  7,  8],
       [ 9, 10, 11, 12]])
</pre></div>
</div>
</div>
</div>
<p>第３行目は含まれないことに注意しよう。リストの要素の取り出し方と同じように<code class="docutils literal notranslate"><span class="pre">:</span></code>の右のインデックスの行は含まれない。</p>
<p><strong>（注意）</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">,:</span></code>を省略して<code class="docutils literal notranslate"><span class="pre">mat[1:3]</span></code>と書いてもエラーは発生せず同じ結果が返されるが，<code class="docutils literal notranslate"><span class="pre">,:</span></code>があることにより，行を抽出しており列は全て選択されていることが明示的になる。</p>
<p>第<span class="math notranslate nohighlight">\(i\)</span> 列目を抽出したい場合は次のコードになる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 2,  6, 10, 14])
</pre></div>
</div>
</div>
</div>
<p>複数列の抽出は以下のようにする。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 2,  3],
       [ 6,  7],
       [10, 11],
       [14, 15]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id5">
<h2><code class="docutils literal notranslate"><span class="pre">array</span></code>を使った計算<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<p>まず２つ２次元<code class="docutils literal notranslate"><span class="pre">array</span></code>を作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="n">m1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 1],
       [1, 1]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<span class="n">m2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[2, 2],
       [2, 2]])
</pre></div>
</div>
</div>
</div>
<p>これらは数学で習った行列のように見えるが，少し異なる性質（特に積）を持っているので注意しよう。</p>
<section id="id6">
<h3>加算<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p>要素ごとの和となる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m2</span> <span class="o">+</span> <span class="n">m1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[3, 3],
       [3, 3]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3>減算<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<p>要素ごとの差となる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m2</span> <span class="o">-</span> <span class="n">m1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 1],
       [1, 1]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id8">
<h3>スカラー乗算<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>与えられた定数とそれぞれの要素の積となる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">10</span> <span class="o">*</span> <span class="n">m1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[10, 10],
       [10, 10]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m1</span><span class="o">/</span><span class="mi">2</span>  <span class="c1"># 1/2をかけるのと同じ</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0.5, 0.5],
       [0.5, 0.5]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id9">
<h3>乗算：バージョン１<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">*</span></code>を使うと要素どうしの積となる。数学で学んだ行列の計算とは異なるので注意すること。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m1</span><span class="o">*</span><span class="n">m2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[2, 2],
       [2, 2]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id10">
<h3>乗算：バージョン２<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&#64;</span></code>を使うと数学で学んだ行列の積となる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m1</span><span class="nd">@m2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[4, 4],
       [4, 4]])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">numpy</span></code>の関数<code class="docutils literal notranslate"><span class="pre">dot()</span></code>は<code class="docutils literal notranslate"><span class="pre">&#64;</span></code>と同じとなる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span><span class="n">m2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[4, 4],
       [4, 4]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id11">
<h3>転置<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<p>数学で学ぶ転置行列と同じ。<code class="docutils literal notranslate"><span class="pre">m3</span></code>を使って説明する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]])</span>
<span class="n">m3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 2, 3],
       [4, 5, 6]])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">m3</span></code>のメソッド<code class="docutils literal notranslate"><span class="pre">transpose()</span></code>を使う。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m3</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 4],
       [2, 5],
       [3, 6]])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">.transpose()</span></code>の省略形として<code class="docutils literal notranslate"><span class="pre">.T</span></code>を使うこともできる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m3</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 4],
       [2, 5],
       [3, 6]])
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="linalg">
<h2><code class="docutils literal notranslate"><span class="pre">linalg</span></code>サブパッケージ<a class="headerlink" href="#linalg" title="Link to this heading">#</a></h2>
<p>２次元配列の<code class="docutils literal notranslate"><span class="pre">array</span></code>は行列として使える。その特徴を活かして<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>のサブパッケージである<code class="docutils literal notranslate"><span class="pre">linalg</span></code>（linear algebraの略であり「線形代数」という意味）を使うと連立方程式を解いたり固有値を簡単に計算することができる。</p>
<section id="sec-2-simultaneouseq">
<span id="id12"></span><h3>連立一次方程式の解<a class="headerlink" href="#sec-2-simultaneouseq" title="Link to this heading">#</a></h3>
<p>連立一次方程式は行列表記できる。例えば，</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
    a_{11}y + a_{12}x &amp;= b_1\\
    a_{21}y + a_{22}x &amp;= b_2   
\end{align*}
\end{split}\]</div>
<div class="math notranslate nohighlight">
\[
\Downarrow
\]</div>
<div class="math notranslate nohighlight">
\[
a\cdot z=b
\]</div>
<p>ここで</p>
<div class="math notranslate nohighlight">
\[\begin{split}
a=
\begin{bmatrix}
    a_{11} &amp; a_{12} \\
    a_{21} &amp; a_{22}
\end{bmatrix}
,\quad
z=
\begin{bmatrix}
    y \\
    x
\end{bmatrix}
,\quad
b=
\begin{bmatrix}
    b_1 \\
    b_2
\end{bmatrix}
\end{split}\]</div>
<p>解は逆行列を使い計算できる。</p>
<div class="math notranslate nohighlight">
\[
z=a^{-1}b
\]</div>
<section id="solve">
<h4><code class="docutils literal notranslate"><span class="pre">solve</span></code><a class="headerlink" href="#solve" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">z</span></code>を求めるために<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>のサブパッケージ<code class="docutils literal notranslate"><span class="pre">linalg</span></code>の中にある<code class="docutils literal notranslate"><span class="pre">solve</span></code>関数を使うが，次のような書き方となる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>このコードは<code class="docutils literal notranslate"><span class="pre">.</span></code>を助詞「の」として，<code class="docutils literal notranslate"><span class="pre">()</span></code>を「実行する」と読むと，次のように日本語として読むことができる。「<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>の<code class="docutils literal notranslate"><span class="pre">linalg</span></code>の<code class="docutils literal notranslate"><span class="pre">solve</span></code>関数を引数<code class="docutils literal notranslate"><span class="pre">a</span></code>と<code class="docutils literal notranslate"><span class="pre">b</span></code>を使い実行する」と読める。では実際に<code class="docutils literal notranslate"><span class="pre">solve</span></code>を使って解を求めよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>ここで<code class="docutils literal notranslate"><span class="pre">sol</span></code>は解からなる<code class="docutils literal notranslate"><span class="pre">array</span></code>である。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sol</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-30.,  25.])
</pre></div>
</div>
</div>
</div>
<p>分かりやすく次のように表示しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;y = </span><span class="si">{</span><span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">x = </span><span class="si">{</span><span class="n">sol</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>y = -30.0
x = 25.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="inv">
<h4><code class="docutils literal notranslate"><span class="pre">inv</span></code><a class="headerlink" href="#inv" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">array</span></code>の逆行列は，サブパッケージ<code class="docutils literal notranslate"><span class="pre">linalg</span></code>の中にある<code class="docutils literal notranslate"><span class="pre">inv</span></code>で計算できる。<code class="docutils literal notranslate"><span class="pre">a</span></code>を例にとると，書き方は次のようになる</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">solve</span></code>と同じように日本語として読むことができる。</p>
<p>では<code class="docutils literal notranslate"><span class="pre">a</span></code>の逆行列を計算して解を求めてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="n">a_inv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
<span class="n">a_inv</span><span class="nd">@b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-30.,  25.])
</pre></div>
</div>
</div>
</div>
<p>当たり前だが，同じ解である。</p>
</section>
</section>
<section id="eigvals">
<h3>固有値：<code class="docutils literal notranslate"><span class="pre">eigvals</span></code><a class="headerlink" href="#eigvals" title="Link to this heading">#</a></h3>
<p>行列の固有値を計算する<code class="docutils literal notranslate"><span class="pre">eigvals()</span></code>関数を紹介する。<code class="docutils literal notranslate"><span class="pre">a</span></code>を例に使うと次の書き方となる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigvals</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>この関数は動学モデルの安定性（収束、発散）を調べる場合に役に立つ。より具体的な説明は後程おこなうことにする。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">eigvals</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-0.37228132,  5.37228132])
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id13">
<h2>NumPy使用時によく使う属性とメソッド<a class="headerlink" href="#id13" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">py4macro.see()</span></code>関数を使って<code class="docutils literal notranslate"><span class="pre">m3</span></code>の属性とメソッドを調べてみる。</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">py4macro</span><span class="o">.</span><span class="n">see</span><span class="p">(</span><span class="n">m3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>.T               .all()           .any()           .argmax()
.argmin()        .argpartition()  .argsort()       .astype()
.base            .byteswap()      .choose()        .clip()
.compress()      .conj()          .conjugate()     .copy()
.ctypes          .cumprod()       .cumsum()        .data
.diagonal()      .dot()           .dtype           .dump()
.dumps()         .fill()          .flags           .flat
.flatten()       .getfield()      .imag            .item()
.itemset()       .itemsize        .max()           .mean()
.min()           .nbytes          .ndim            .newbyteorder()
.nonzero()       .partition()     .prod()          .ptp()
.put()           .ravel()         .real            .repeat()
.reshape()       .resize()        .round()         .searchsorted()
.setfield()      .setflags()      .shape           .size
.sort()          .squeeze()       .std()           .strides
.sum()           .swapaxes()      .take()          .tobytes()
.tofile()        .tolist()        .tostring()      .trace()
.transpose()     .var()           .view()
</pre></div>
</div>
</div>
</div>
<p>この中に上で使った<code class="docutils literal notranslate"><span class="pre">transpose()</span></code>や<code class="docutils literal notranslate"><span class="pre">T</span></code>があるのが確認できる。この中でよく使うのが<code class="docutils literal notranslate"><span class="pre">shape</span></code>であり，行と列の数を確認する場合に有用なデータ属性である。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m3</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 3)
</pre></div>
</div>
</div>
</div>
<p>2x3の<code class="docutils literal notranslate"><span class="pre">array</span></code>であることが確認できる。</p>
<p>次に，抽出した行または列をリストに変換するメソッドについて説明する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r0</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span>
<span class="n">r0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1, 2, 3, 4])
</pre></div>
</div>
</div>
</div>
<p>これをリストに変換するために<code class="docutils literal notranslate"><span class="pre">tolist()</span></code>というメソッドを使う。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r0_list</span> <span class="o">=</span> <span class="n">r0</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">r0_list</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">r0_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>list
</pre></div>
</div>
</div>
</div>
</section>
<section id="id14">
<h2>よく使うNumPy関数<a class="headerlink" href="#id14" title="Link to this heading">#</a></h2>
<section id="id15">
<h3>浮動小数点の比較<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<p>次のコードを考えよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mf">0.3</span> <span class="o">==</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>これはバグ（bug）ではない。浮動小数点は近似値として扱われるために発生する（詳細は「<a class="reference internal" href="things_to_note.html#sec-tip-float"><span class="std std-ref">浮動小数点型について</span></a>」を参照）。従って，浮動小数点が等しいかを確認するために<code class="docutils literal notranslate"><span class="pre">==</span></code>を使うのは<strong>避けるべきである</strong>。その代わりに<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>の関数<code class="docutils literal notranslate"><span class="pre">.isclose()</span></code>を使うようにしよう。使い方は比べる値を引数に指定するだけで良い。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">isclose</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.1</span><span class="o">+</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="id16">
<h3>様々な<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>関数<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<p><strong>ルート <span class="math notranslate nohighlight">\(\left(\sqrt x\right)\)</span></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0
</pre></div>
</div>
</div>
</div>
<p><strong>底が<span class="math notranslate nohighlight">\(e\)</span>の指数関数（<span class="math notranslate nohighlight">\(e^x\)</span>）</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>22026.465794806718
</pre></div>
</div>
</div>
</div>
<p><strong>自然対数（<span class="math notranslate nohighlight">\(\log_ex\)</span>または<span class="math notranslate nohighlight">\(\ln x\)</span>）</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.302585092994046
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">0</span></code>が<span class="math notranslate nohighlight">\(N\)</span>個の<code class="docutils literal notranslate"><span class="pre">array</span></code>を作る。</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">1.0</span></code>が<span class="math notranslate nohighlight">\(N\)</span>個の<code class="docutils literal notranslate"><span class="pre">array</span></code>を作る。</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1.])
</pre></div>
</div>
</div>
</div>
<p><strong><span class="math notranslate nohighlight">\(a\)</span>から<span class="math notranslate nohighlight">\(b\)</span>までの区間を等間隔に割った<span class="math notranslate nohighlight">\(N\)</span>個の数字を返す。</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0.  , 0.25, 0.5 , 0.75, 1.  ])
</pre></div>
</div>
</div>
</div>
<p><strong><span class="math notranslate nohighlight">\(a\)</span>から<span class="math notranslate nohighlight">\(b\)</span>までの区間で<span class="math notranslate nohighlight">\(m\)</span>ステップずつ増加し等間隔に割った数字を返す（<span class="math notranslate nohighlight">\(b\)</span>は含まない）。</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">m</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">=</span> <span class="pre">1</span></code>の場合，組み込み関数の<code class="docutils literal notranslate"><span class="pre">range(a,b)</span></code>と同じ数字を生成するが，返り値が<code class="docutils literal notranslate"><span class="pre">array</span></code>であることが異なる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([5. , 5.5, 6. , 6.5, 7. , 7.5, 8. , 8.5, 9. , 9.5])
</pre></div>
</div>
</div>
</div>
<p><strong>標本平均</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">x</span></code>が数字の<code class="docutils literal notranslate"><span class="pre">array</span></code>やリストの場合</p>
<p><code class="docutils literal notranslate"><span class="pre">np.mean(x)</span></code><span class="math notranslate nohighlight">\(=\bar{x}=\frac{1}{n}\sum_{i=1}^{n}x_i\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.5
</pre></div>
</div>
</div>
</div>
<p><strong>標本中央値</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">x</span></code>が数字の<code class="docutils literal notranslate"><span class="pre">array</span></code>やリストの場合</p>
<p><code class="docutils literal notranslate"><span class="pre">np.median(x)</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.5
</pre></div>
</div>
</div>
</div>
<p><strong>標本分散</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">x</span></code>が数字の<code class="docutils literal notranslate"><span class="pre">array</span></code>やリストの場合</p>
<p><code class="docutils literal notranslate"><span class="pre">np.var(x,</span> <span class="pre">ddof=0)</span></code><span class="math notranslate nohighlight">\(=s_x^2=\dfrac{1}{1-\text{ddof}}\sum_{i=1}^n\left(x_i-\bar{x}\right)^2\)</span>（<code class="docutils literal notranslate"><span class="pre">ddof=0</span></code>がデフォルト）</p>
<p>（注意）計量経済学で習う分散の不偏推定量は<code class="docutils literal notranslate"><span class="pre">ddof=1</span></code>が必要！</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">var</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span><span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.5
</pre></div>
</div>
</div>
</div>
<p><strong>標本標準偏差</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">x</span></code>が数字の<code class="docutils literal notranslate"><span class="pre">array</span></code>やリストの場合</p>
<p><code class="docutils literal notranslate"><span class="pre">np.std(x,</span> <span class="pre">ddof=0)</span></code><span class="math notranslate nohighlight">\(=s_x=\sqrt{s_x^2}\)</span>  （<code class="docutils literal notranslate"><span class="pre">ddof=0</span></code>がデフォルト）</p>
<p>（注意）標本標準偏差の場合，必ずしも<code class="docutils literal notranslate"><span class="pre">ddof=1</span></code>により不偏推定量とはならないが，通常<code class="docutils literal notranslate"><span class="pre">ddof=1</span></code>を用いる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span><span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.8708286933869707
</pre></div>
</div>
</div>
</div>
<p><strong>標本共分散</strong></p>
<p>2次元以上の<code class="docutils literal notranslate"><span class="pre">array</span></code>やリストの場合</p>
<p><code class="docutils literal notranslate"><span class="pre">np.cov(xy,</span> <span class="pre">ddof=0)</span></code><span class="math notranslate nohighlight">\(=c_{xy}=\dfrac{1}{1-\text{ddof}}\sum_{i=1}^n(x_i-\bar{x})(y_i-\bar{y})\)</span>（<code class="docutils literal notranslate"><span class="pre">ddof=0</span></code>がデフォルト）</p>
<p>（注意）計量経済学で習う分散の不偏推定量は<code class="docutils literal notranslate"><span class="pre">ddof=1</span></code>が必要！</p>
<p>下の計算結果</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(c_{xy}=-0.6\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(s_x^2=3.5\)</span>  ([1,2,3,4,5,6]の分散）</p></li>
<li><p><span class="math notranslate nohighlight">\(s_y^2=4.4\)</span>  ([1,6,2,5,3,1]の分散）</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xy</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">np</span><span class="o">.</span><span class="n">cov</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span><span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 3.5, -0.6],
       [-0.6,  4.4]])
</pre></div>
</div>
</div>
</div>
<p><strong>標本相関係数</strong></p>
<p>2次元以上の<code class="docutils literal notranslate"><span class="pre">array</span></code>やリストの場合</p>
<p><code class="docutils literal notranslate"><span class="pre">np.corrcoef(xy)</span></code><span class="math notranslate nohighlight">\(=r_{xy}=\dfrac{c_{xy}}{s_x\cdot s_y}\)</span></p>
<p>（注意）<code class="docutils literal notranslate"><span class="pre">ddof</span></code>の影響はない。</p>
<p>下の計算結果</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(r_{xy}=-0.152...\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(r_{xx}=r_{yy}=1\)</span></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span><span class="n">xy</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[ 1.        , -0.15289416],
       [-0.15289416,  1.        ]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id17">
<h3>効用関数<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<p>関数に<code class="docutils literal notranslate"><span class="pre">if</span></code>文を組み込む例を考える。相対的リスク回避度一定効用関数は次のように定義される。</p>
<div class="math notranslate nohighlight">
\[\begin{split}
u(x)=
\begin{cases}
    &amp;\dfrac{x^{1-s}-1}{1-s}\quad s\ne 1\\
    &amp;\log(x)\quad s=1
\end{cases}
\end{split}\]</div>
<p><code class="docutils literal notranslate"><span class="pre">def</span></code>を使って表すと次のようになる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">utility</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">s</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">s</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">s</span><span class="p">)</span>
    
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">utility</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.302585092994046
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">utility</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6.636966806002416
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="array-vs-list">
<h2><code class="docutils literal notranslate"><span class="pre">array</span></code> vs <code class="docutils literal notranslate"><span class="pre">list</span></code><a class="headerlink" href="#array-vs-list" title="Link to this heading">#</a></h2>
<p>ここでは<code class="docutils literal notranslate"><span class="pre">list</span></code>と<code class="docutils literal notranslate"><span class="pre">array</span></code>の違いについて説明する。
次のリストのそれぞれの要素に<code class="docutils literal notranslate"><span class="pre">10</span></code>を足したいとしよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list0</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使うと次のようになる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list1</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">list0</span><span class="p">:</span>
    <span class="n">list1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>

<span class="n">list1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[11.0, 12.0, 13.0, 14.0, 15.0]
</pre></div>
</div>
</div>
</div>
<p>複雑さが残る。また次のコードでは<code class="docutils literal notranslate"><span class="pre">10</span></code>を最後に追加し，リスト同士を結合するだけである。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list0</span> <span class="o">+</span> <span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1.0, 2.0, 3.0, 4.0, 5.0, 10]
</pre></div>
</div>
</div>
</div>
<p>より簡単なコードで実行できれば良いが，以下のコードではエラーが発生する。</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list0</span> <span class="o">+</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">66</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">list0</span> <span class="o">+</span> <span class="mi">10</span>

<span class="ne">TypeError</span>: can only concatenate list (not &quot;int&quot;) to list
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<p>これを実現するのが<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>の<code class="docutils literal notranslate"><span class="pre">array</span></code>である。</p>
<p>まず<code class="docutils literal notranslate"><span class="pre">array</span></code>を作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">list0</span><span class="p">)</span>
<span class="n">arr0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1., 2., 3., 4., 5.])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr0</span> <span class="o">+</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([11., 12., 13., 14., 15.])
</pre></div>
</div>
</div>
</div>
<p>この機能はベクトル演算（Vectorization）と呼ばれ、ループを使わずに個々の要素に直接働きかけ計算している。この機能により、より高速な計算が可能となるばかりか、より短いコードでそれを実現できる。<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">**</span></code> や他の関数にも同様に使うことができる。以下で例を挙げる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr0</span> <span class="o">-</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([-4., -3., -2., -1.,  0.])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr0</span> <span class="o">*</span> <span class="mi">10</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([10., 20., 30., 40., 50.])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">arr0</span> <span class="o">**</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 1.,  4.,  9., 16., 25.])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">arr0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([1.        , 1.41421356, 1.73205081, 2.        , 2.23606798])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">arr0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0.        , 0.69314718, 1.09861229, 1.38629436, 1.60943791])
</pre></div>
</div>
</div>
</div>
<p>次の計算も可能である。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">arr0</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">arr0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span>
<span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([13.        , 15.41421356, 17.73205081, 20.        , 22.23606798])
</pre></div>
</div>
</div>
</div>
<p>この機能は<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>の2次元配列でも有効である。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])</span>
<span class="n">mat0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mat0</span> <span class="o">*</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[10, 20, 30],
       [40, 50, 60],
       [70, 80, 90]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mat0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[1.        , 1.41421356, 1.73205081],
       [2.        , 2.23606798, 2.44948974],
       [2.64575131, 2.82842712, 3.        ]])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">mat0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[0.        , 0.69314718, 1.09861229],
       [1.38629436, 1.60943791, 1.79175947],
       [1.94591015, 2.07944154, 2.19722458]])
</pre></div>
</div>
</div>
</div>
</section>
<section id="id18">
<h2>マクロ経済学を考える<a class="headerlink" href="#id18" title="Link to this heading">#</a></h2>
<section id="id19">
<h3>ケインズの45度線モデル<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>所得：<span class="math notranslate nohighlight">\(Y\)</span></p></li>
<li><p>計画支出：<span class="math notranslate nohighlight">\(E=C+I+G\)</span></p></li>
<li><p>消費関数：<span class="math notranslate nohighlight">\(C=d+cY\)</span></p>
<ul>
<li><p>自発的消費：<span class="math notranslate nohighlight">\(d=10\)</span></p></li>
<li><p>限界消費性向：<span class="math notranslate nohighlight">\(c=0.7\)</span></p></li>
</ul>
</li>
<li><p>投資：<span class="math notranslate nohighlight">\(I=15\)</span></p></li>
<li><p>政府支出：<span class="math notranslate nohighlight">\(G=10\)</span></p></li>
<li><p>均衡：<span class="math notranslate nohighlight">\(E=Y\)</span></p></li>
</ul>
<p>２つの式で表す。</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
    E-cY &amp;= I+G-d \\
    E-Y &amp;= 0
\end{align*}
\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\Downarrow\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{bmatrix}
    1&amp; -c \\
    1&amp; -1
\end{bmatrix}
\begin{bmatrix}
    E \\
    Y
\end{bmatrix}
=
\begin{bmatrix}
    I+G-d \\
    0
\end{bmatrix}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">15</span>   <span class="c1"># I</span>
<span class="n">g</span> <span class="o">=</span> <span class="mi">10</span>   <span class="c1"># G</span>
<span class="n">d</span> <span class="o">=</span> <span class="mi">10</span>   <span class="c1"># d</span>
<span class="n">c</span> <span class="o">=</span> <span class="mf">0.7</span>  <span class="c1"># c</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="n">c</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">i</span><span class="o">+</span><span class="n">g</span><span class="o">-</span><span class="n">d</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;E = </span><span class="si">{</span><span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="se">\n</span><span class="s1">Y = </span><span class="si">{</span><span class="n">sol</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>E = 50.0
Y = 50.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="is-2">
<h3>IS曲線の導出：２つの方程式を使う<a class="headerlink" href="#is-2" title="Link to this heading">#</a></h3>
<section id="for-1">
<h4><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使う：方法１<a class="headerlink" href="#for-1" title="Link to this heading">#</a></h4>
<p>上の４５度線モデルの投資を次のように変更する。</p>
<ul class="simple">
<li><p>投資関数：<span class="math notranslate nohighlight">\(I=f-hr\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(r\)</span>：実質利子率</p></li>
<li><p><span class="math notranslate nohighlight">\(f=20\)</span>：<span class="math notranslate nohighlight">\(r=0\)</span>の場合の投資</p></li>
<li><p><span class="math notranslate nohighlight">\(h=1.0\)</span>：実質利子率が1%上昇した場合，減少する投資量</p></li>
</ul>
</li>
<li><p>実質利子率は次の値を取るとする。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r_list</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="nb">list</span><span class="p">(</span><span class="n">r_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</div>
</div>
</div>
<p>それぞれの実質利子率の値での均衡での所得と投資を計算する。まず２つの式で表す。</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
    (1-c)Y-I &amp;= G-d \\
    I &amp;= f-hr
\end{align*}
\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\Downarrow\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{bmatrix}
    1-c&amp; -1 \\
    0&amp; 1
\end{bmatrix}
\begin{bmatrix}
    Y \\
    I
\end{bmatrix}
=
\begin{bmatrix}
    G-d \\
    f-hr
\end{bmatrix}
\end{split}\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="mf">20.0</span>
<span class="n">h</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">inv_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">r_list</span><span class="p">:</span>
    
    <span class="c1"># 異なる実質利子率の値で解を計算する</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">g</span><span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="n">f</span><span class="o">-</span><span class="n">h</span><span class="o">*</span><span class="n">r</span><span class="p">])</span>
    <span class="n">sol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
    
    <span class="n">y_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>   <span class="c1"># round(x)は小数点第x位まで四捨五入するメソッド</span>
    <span class="n">inv_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;所得：&#39;</span><span class="p">,</span> <span class="n">y_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;投資：&#39;</span><span class="p">,</span> <span class="n">inv_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>所得： [66.7, 63.3, 60.0, 56.7, 53.3, 50.0, 46.7, 43.3, 40.0, 36.7]
投資： [20.0, 19.0, 18.0, 17.0, 16.0, 15.0, 14.0, 13.0, 12.0, 11.0]
</pre></div>
</div>
</div>
</div>
<p>実質利子率が上昇すると，所得と投資は減少することがわかる。即ち，IS曲線上では所得と実質利子率は負の関係にあることが確認できる。</p>
</section>
<section id="for-2">
<h4><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使う：方法２<a class="headerlink" href="#for-2" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">r_list</span><span class="p">)</span>        <span class="c1"># r_listの要素数</span>

<span class="n">y_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>    <span class="c1"># n個のゼロarray</span>
<span class="n">inv_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>  <span class="c1"># n個のゼロarray</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">g</span><span class="o">-</span><span class="n">d</span><span class="p">,</span><span class="n">f</span><span class="o">-</span><span class="n">h</span><span class="o">*</span><span class="n">r_list</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>   <span class="c1"># i番目のr_listを使う</span>
    <span class="n">sol</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
    
    <span class="n">y_arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># i番目のy_arrに割り当てる</span>
    <span class="n">inv_arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sol</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>          <span class="c1"># i番目のinv_arrに割り当てる</span>


<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;所得：&#39;</span><span class="p">,</span> <span class="n">y_arr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;投資：&#39;</span><span class="p">,</span> <span class="n">inv_arr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>所得： [66.7 63.3 60.  56.7 53.3 50.  46.7 43.3 40.  36.7]
投資： [20. 19. 18. 17. 16. 15. 14. 13. 12. 11.]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="is-1">
<h3>IS曲線の導出：１つの方程式を使う<a class="headerlink" href="#is-1" title="Link to this heading">#</a></h3>
<p>上の２つの式を１つにする。</p>
<div class="math notranslate nohighlight">
\[
Y=\frac{f-hr+G-d}{1-c}
\]</div>
<p>この式を使って<code class="docutils literal notranslate"><span class="pre">for</span></code>ループで計算する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">y_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">r_list</span><span class="p">:</span>
    
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="o">-</span><span class="n">h</span><span class="o">*</span><span class="n">r</span><span class="o">+</span><span class="n">g</span><span class="o">-</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">c</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>         <span class="c1"># round(x)は浮動小数点を四捨五入する関数</span>
    <span class="n">y_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;所得：&#39;</span><span class="p">,</span> <span class="n">y_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>所得： [66.7, 63.3, 60.0, 56.7, 53.3, 50.0, 46.7, 43.3, 40.0, 36.7]
</pre></div>
</div>
</div>
</div>
<p>次の方法でも良い。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">r_list</span><span class="p">)</span>        <span class="c1"># r_listの要素数</span>

<span class="n">y_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>    <span class="c1"># n個のゼロarray</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">y_arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="o">-</span><span class="n">h</span><span class="o">*</span><span class="n">r_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">g</span><span class="o">-</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">c</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;所得：&#39;</span><span class="p">,</span> <span class="n">y_arr</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>   <span class="c1"># round()は四捨五入するメソッド</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>所得： [66.7 63.3 60.  56.7 53.3 50.  46.7 43.3 40.  36.7]
</pre></div>
</div>
</div>
</div>
</section>
<section id="is">
<h3>IS曲線の導出：ベクトル演算を使う<a class="headerlink" href="#is" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使わずに，<code class="docutils literal notranslate"><span class="pre">array</span></code>のベクトル演算を使うともっと簡単なコードで同じ結果を得ることができる。上の１つにまとめた式に基づいて次の関数を定義する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">y_equil</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="o">-</span><span class="n">h</span><span class="o">*</span><span class="n">r</span><span class="o">+</span><span class="n">g</span><span class="o">-</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">c</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>      <span class="c1"># round()は四捨五入のメソッド</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">r_list</span></code>を<code class="docutils literal notranslate"><span class="pre">array</span></code>に変換する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r_arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">r_list</span><span class="p">)</span>
<span class="n">r_arr</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">r_arr</span></code>を使って直接評価する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;所得：&#39;</span><span class="p">,</span> <span class="n">y_equil</span><span class="p">(</span><span class="n">r_arr</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>所得： [66.7 63.3 60.  56.7 53.3 50.  46.7 43.3 40.  36.7]
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="1_Basics_VI.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">図示とシミュレーション</p>
      </div>
    </a>
    <a class="right-next"
       href="3_Pandas.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">Pandas</span></code>：データ分析</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#array"><code class="docutils literal notranslate"><span class="pre">array</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">１次元配列</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">要素の抽出</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">要素の代入と削除</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">２次元配列：要素の抽出</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5"><code class="docutils literal notranslate"><span class="pre">array</span></code>を使った計算</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">加算</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">減算</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">スカラー乗算</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">乗算：バージョン１</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">乗算：バージョン２</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">転置</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linalg"><code class="docutils literal notranslate"><span class="pre">linalg</span></code>サブパッケージ</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sec-2-simultaneouseq">連立一次方程式の解</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#solve"><code class="docutils literal notranslate"><span class="pre">solve</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inv"><code class="docutils literal notranslate"><span class="pre">inv</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eigvals">固有値：<code class="docutils literal notranslate"><span class="pre">eigvals</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">NumPy使用時によく使う属性とメソッド</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">よく使うNumPy関数</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">浮動小数点の比較</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">様々な<code class="docutils literal notranslate"><span class="pre">NumPy</span></code>関数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">効用関数</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#array-vs-list"><code class="docutils literal notranslate"><span class="pre">array</span></code> vs <code class="docutils literal notranslate"><span class="pre">list</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">マクロ経済学を考える</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">ケインズの45度線モデル</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-2">IS曲線の導出：２つの方程式を使う</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#for-1"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使う：方法１</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#for-2"><code class="docutils literal notranslate"><span class="pre">for</span></code>ループを使う：方法２</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is-1">IS曲線の導出：１つの方程式を使う</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#is">IS曲線の導出：ベクトル演算を使う</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 春山 鉄源  Tetsugen HARUYAMA
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <!-- Default Statcounter code for Py4Basics https://py4basics.github.io --> <script type="text/javascript"> var sc_project=12615270; var sc_invisible=1; var sc_security="2a7796f0"; </script> <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script> <noscript><div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/12615270/0/2a7796f0/1/" alt="Web Analytics" referrerPolicy="no-referrer-when-downgrade"></a></div></noscript> <!-- End of Statcounter Code -->
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>